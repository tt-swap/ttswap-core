<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">Contracts</li><li class="chapter-item "><a href="Contracts/interfaces/index.html">❱ interfaces</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="Contracts/interfaces/I_Good.sol/interface.I_Good.html">I_Good</a></li><li class="chapter-item "><a href="Contracts/interfaces/I_MarketManage.sol/interface.I_MarketManage.html">I_MarketManage</a></li><li class="chapter-item "><a href="Contracts/interfaces/I_Proof.sol/interface.I_Proof.html">I_Proof</a></li><li class="chapter-item "><a href="Contracts/interfaces/I_Referer.sol/interface.I_Referer.html">I_Referer</a></li></ol></li><li class="chapter-item "><a href="Contracts/libraries/index.html">❱ libraries</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="Contracts/libraries/L_ArrayStorage.sol/library.L_ArrayStorage.html">L_ArrayStorage</a></li><li class="chapter-item "><a href="Contracts/libraries/L_BalanceUINT256.sol/type.T_BalanceUINT256.html">T_BalanceUINT256</a></li><li class="chapter-item "><a href="Contracts/libraries/L_BalanceUINT256.sol/library.L_BalanceUINT256Library.html">L_BalanceUINT256Library</a></li><li class="chapter-item "><a href="Contracts/libraries/L_BalanceUINT256.sol/function.toBalanceUINT256.html">toBalanceUINT256</a></li><li class="chapter-item "><a href="Contracts/libraries/L_BalanceUINT256.sol/function.lowerprice.html">lowerprice</a></li><li class="chapter-item "><a href="Contracts/libraries/L_BalanceUINT256.sol/function.subadd.html">subadd</a></li><li class="chapter-item "><a href="Contracts/libraries/L_BalanceUINT256.sol/function.sub.html">sub</a></li><li class="chapter-item "><a href="Contracts/libraries/L_BalanceUINT256.sol/function.addsub.html">addsub</a></li><li class="chapter-item "><a href="Contracts/libraries/L_BalanceUINT256.sol/function.add.html">add</a></li><li class="chapter-item "><a href="Contracts/libraries/L_Currency.sol/library.L_CurrencyLibrary.html">L_CurrencyLibrary</a></li><li class="chapter-item "><a href="Contracts/libraries/L_Good.sol/library.L_Good.html">L_Good</a></li><li class="chapter-item "><a href="Contracts/libraries/L_Good.sol/library.L_GoodIdLibrary.html">L_GoodIdLibrary</a></li><li class="chapter-item "><a href="Contracts/libraries/L_GoodConfig.sol/library.L_GoodConfigLibrary.html">L_GoodConfigLibrary</a></li><li class="chapter-item "><a href="Contracts/libraries/L_MarketConfig.sol/library.L_MarketConfigLibrary.html">L_MarketConfigLibrary</a></li><li class="chapter-item "><a href="Contracts/libraries/L_Proof.sol/library.L_Proof.html">L_Proof</a></li><li class="chapter-item "><a href="Contracts/libraries/L_Proof.sol/library.L_ProofIdLibrary.html">L_ProofIdLibrary</a></li><li class="chapter-item "><a href="Contracts/libraries/L_Struct.sol/struct.S_GoodKey.html">S_GoodKey</a></li><li class="chapter-item "><a href="Contracts/libraries/L_Struct.sol/struct.S_ProofKey.html">S_ProofKey</a></li><li class="chapter-item "><a href="Contracts/libraries/L_Struct.sol/struct.S_Ralate.html">S_Ralate</a></li></ol></li><li class="chapter-item "><a href="Contracts/GoodManage.sol/abstract.GoodManage.html">GoodManage</a></li><li class="chapter-item "><a href="Contracts/MarketManager.sol/contract.MarketManager.html">MarketManager</a></li><li class="chapter-item "><a href="Contracts/Multicall.sol/abstract.Multicall.html">Multicall</a></li><li class="chapter-item "><a href="Contracts/ProofManage.sol/abstract.ProofManage.html">ProofManage</a></li><li class="chapter-item "><a href="Contracts/RefererManage.sol/abstract.RefererManage.html">RefererManage</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ttswap"><a class="header" href="#ttswap">TTSWAP</a></h1>
<p>TTSWAP (token-token swap) protocol is a decentralized automated market-making protocol built on the Ethereum blockchain. Its underlying principle is based on the transfer of market value triggered by user behavior, and it constructs a platform using value conservation trading strategies.
The whitepaper explains the design logic of the ttswap project, covering principles and implementations of good trading, investment, and withdrawal of value goods, as well as ordinary good investment and withdrawal, and the generation and distribution of good transaction fees.</p>
<h2 id="features"><a class="header" href="#features">Features</a></h2>
<p>Value Conservation Trading Strategy
The value conservation trading strategy accurately reflects the true market value of currencies and facilitates fast good transactions.</p>
<ol>
<li>
<p>Direct Trading without Intermediaries
On this platform, any two types of items can be directly traded without the need for intermediate conversions.</p>
</li>
<li>
<p>No Slippage within Trading Threshold
Transactions below the good trading threshold incur no slippage.</p>
</li>
<li>
<p>No Impermanent Loss for Liquidity Providers or good Investors
Constant market value inherently prevents impermanent loss. When users withdraw their investment, they receive the original invested good plus profits generated from providing liquidity.</p>
</li>
<li>
<p>Low Gas Fees with Simple Computational Logic
The logic behind the constant value trading model is simple, resulting in low computational load and gas consumption.</p>
</li>
<li>
<p>Fee Distribution Based on Roles for Everyone
Fees are distributed based on roles, allowing anyone to become a good investor (liquidity provider), goods seller, gater, referrer, user, or platform role, sharing in the platform's growth earnings.</p>
</li>
<li>
<p>Support Native ETH Exchange and Invest
anyone can you native ETH without wrap to swap, invest easily.</p>
</li>
<li>
<p>Community-Driven Developement and Innovation
ttswap emphasizes a community-driven approach to development and innovation. Since its code release, there has been active community engagement, with many issues, pull requests, and unique feature ideas contributed by users. The protocol is designed to encourage innovation, allowing the global community to shape the future of AMMs.</p>
</li>
</ol>
<h2 id="contributing"><a class="header" href="#contributing">Contributing</a></h2>
<p>If you’re interested in contributing please see our <a href="./CONTRIBUTING.html">contribution guidelines</a>!</p>
<h2 id="whitepaper"><a class="header" href="#whitepaper">Whitepaper</a></h2>
<p>A more detailed description of ttswap Core can be found in the draft of the <a href="./docs/whitepaper_en.pdf">TTSWAP Core Whitepaper</a>.</p>
<h2 id="architecture"><a class="header" href="#architecture">Architecture</a></h2>
<p><code>ttswap-core</code> uses a singleton-style architecture, where all goods state is managed in the <code>MarketManager.sol</code> contract.</p>
<p>the contract devide four part:</p>
<p>Part 1: the action relate to good'initial ,good investing (stake or add liquidity),good disinvestint (unstake or remove liquidity),good swaping , or disinvesting proof ( burn stake proof or liquidity position )  are defined in marketmanager.sol.</p>
<p>Part 2: the action relate good config , collect fee of good , good's attribute defined in goodmanage.sol.</p>
<p>Part 3: because proof is ERC721 standard, and it's define in proofmanage.sol</p>
<p>Part 4: about user's refer is defined in referermanager.sol</p>
<h2 id="repository-structure--license"><a class="header" href="#repository-structure--license">Repository Structure &amp;&amp; License</a></h2>
<p>All contracts are held within the <code>ttswap-core/Contracts</code> folder.</p>
<p>Note  but all foundry tests are in the <code>ttswap-core/test</code> folder.</p>
<pre><code class="language-markdown">Contract
├── GoodManage.sol(BUSL-1.1)  
├── MarketManager.sol(BUSL-1.1)  
├── ProofManage.sol(BUSL-1.1)  
├── RefererManage.sol(BUSL-1.1) 
├── Multicall.sol( GPL-2.0-or-later)
├── interfaces  
│   ├── I_Good.sol(MIT)  
│   ├── I_MarketManage.sol(MIT)  
│   └── I_Proof.sol(MIT)   
└── libraries      
   ├── L_Good.sol(BUSL-1.1)    
   ├── L_GoodConfig.sol(MIT)     
   ├── L_MarketConfig.sol(MIT)    
   ├── L_Proof.sol(BUSL-1.1)   
   ├── T_BalanceUINT256.sol (MIT)     
   ├── T_Currency.sol (MIT)       
   ├── L_Struct.sol (MIT)     
   └── L_ArrayStorage.sol(MIT)    
docs
├── ebook
├── whitepaper-cn
│   └──whitepaper-cn.pdf(BUSL-1.1)
└── whitepaper-en
    └──whitepaper-en.pdf(BUSL-1.1)
tests

</code></pre>
<p>The primary license for ttswap-core is the Business Source License 1.1 (<code>BUSL-1.1</code>), see <a href="https://github.com/tt-swap/ttswap-core/blob/main/LICENSE">LICENSE</a>.</p>
<h2 id="everyone-can-be-gater"><a class="header" href="#everyone-can-be-gater">Everyone Can be Gater</a></h2>
<p>To utilize the contracts and deploy to a local testnet, you can install the code in your repo with forge:</p>
<pre><code class="language-markdown">forge install https://github.com/tt-swap/ttswap-core
</code></pre>
<p>To integrate with the contracts, the interfaces are available to use:</p>
<pre><code class="language-solidity">
import {I_MarketManager} from 'ttswap-core/contracts/interfaces/I_MarketManager.sol';

contract MyPortal  {
    IPoolManager poolManager;
    address IamGater

    function excellentThing () {
        poolManager.buyGood(...,IamGater);
    }
}

</code></pre>
<h2 id="user-deploy-local-instruction"><a class="header" href="#user-deploy-local-instruction">User deploy local instruction</a></h2>
<p>step 1:instrall forge
step 2:forge install OpenZeppelin/openzeppelin-contracts@v5.0.2
step 3:forge install marktoda/forge-gas-snapshot</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents"><a class="header" href="#contents">Contents</a></h1>
<ul>
<li><a href="Contracts/interfaces/I_Good.sol/interface.I_Good.html">I_Good</a></li>
<li><a href="Contracts/interfaces/I_MarketManage.sol/interface.I_MarketManage.html">I_MarketManage</a></li>
<li><a href="Contracts/interfaces/I_Proof.sol/interface.I_Proof.html">I_Proof</a></li>
<li><a href="Contracts/interfaces/I_Referer.sol/interface.I_Referer.html">I_Referer</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="i_good"><a class="header" href="#i_good">I_Good</a></h1>
<p>包含商品的一系列接口  contain good's all interfaces</p>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="marketconfig"><a class="header" href="#marketconfig">marketconfig</a></h3>
<p>Returns the config of the market~返回市场的配置</p>
<p><em>Can be changed by the marketmanager~可以被管理员调整</em></p>
<pre><code class="language-solidity">function marketconfig() external view returns (uint256 marketconfig_);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>marketconfig_</code></td><td><code>uint256</code></td><td>the config of market(according the white paper)~市场配置(参见白皮书)</td></tr>
</tbody></table>
</div>
<h3 id="marketcreator"><a class="header" href="#marketcreator">marketcreator</a></h3>
<p>Returns the manger of market 返回市场管理者 返回市场商品总数</p>
<pre><code class="language-solidity">function marketcreator() external view returns (address marketcreator_);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>marketcreator_</code></td><td><code>address</code></td><td>The address of the factory manager</td></tr>
</tbody></table>
</div>
<h3 id="goodnum"><a class="header" href="#goodnum">goodNum</a></h3>
<p>Returns the good's total number of the market 返回市场商品总数</p>
<pre><code class="language-solidity">function goodNum() external view returns (uint256 goodNum_);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodNum_</code></td><td><code>uint256</code></td><td>the good number of the market~市场商品总数</td></tr>
</tbody></table>
</div>
<h3 id="check_banlist"><a class="header" href="#check_banlist">check_banlist</a></h3>
<p>Returns the address's status 查询地址是否被禁止提手续费</p>
<pre><code class="language-solidity">function check_banlist(address _user) external view returns (bool _isban);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>用户地址</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_isban</code></td><td><code>bool</code></td><td>the address status~地址是否被禁</td></tr>
</tbody></table>
</div>
<h3 id="setmarketconfig"><a class="header" href="#setmarketconfig">setMarketConfig</a></h3>
<p>config market config 设置市场中市场配置</p>
<pre><code class="language-solidity">function setMarketConfig(uint256 _marketconfig) external returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_marketconfig</code></td><td><code>uint256</code></td><td>the market config ~市场配置</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>是否成功</td></tr>
</tbody></table>
</div>
<h3 id="getgoodidbyaddress"><a class="header" href="#getgoodidbyaddress">getGoodIdByAddress</a></h3>
<p>get seller's good~获取卖家的商品列表</p>
<pre><code class="language-solidity">function getGoodIdByAddress(address _owner, uint256 _seq) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_owner</code></td><td><code>address</code></td><td>seller address~卖家地址</td></tr>
<tr><td><code>_seq</code></td><td><code>uint256</code></td><td>seller's good index~第几个商品</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>goods No~商品编号</td></tr>
</tbody></table>
</div>
<h3 id="getgoodstate"><a class="header" href="#getgoodstate">getGoodState</a></h3>
<p>get good's state 获取商品状态</p>
<pre><code class="language-solidity">function getGoodState(uint256 _goodid) external view returns (L_Good.S_GoodTmpState memory good_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>good's id  商品的商品编号</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>good_</code></td><td><code>L_Good.S_GoodTmpState</code></td><td>goodinfo 商品的状态信息</td></tr>
</tbody></table>
</div>
<h3 id="updategoodconfig"><a class="header" href="#updategoodconfig">updateGoodConfig</a></h3>
<p>update good's config 更新商品配置</p>
<pre><code class="language-solidity">function updateGoodConfig(uint256 _goodid, uint256 _goodConfig) external returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>good's id 商品的商品ID</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>商品配置</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>the result  更新结果</td></tr>
</tbody></table>
</div>
<h3 id="updatetovaluegood"><a class="header" href="#updatetovaluegood">updatetoValueGood</a></h3>
<p>update normal good to value good 更新普通商品为价值商品</p>
<pre><code class="language-solidity">function updatetoValueGood(uint256 _goodid) external returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>good's id 商品的商品ID</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>the result  更新结果</td></tr>
</tbody></table>
</div>
<h3 id="updatetonormalgood"><a class="header" href="#updatetonormalgood">updatetoNormalGood</a></h3>
<p>update normal good to value good 更新价值商品为普通商品</p>
<pre><code class="language-solidity">function updatetoNormalGood(uint256 _goodid) external returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>good's id 商品的商品ID</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>the result  更新结果</td></tr>
</tbody></table>
</div>
<h3 id="paygood"><a class="header" href="#paygood">payGood</a></h3>
<p>pay good to  转给</p>
<pre><code class="language-solidity">function payGood(uint256 _goodid, uint256 _payquanity, address _recipent) external payable returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>商品的商品ID</td></tr>
<tr><td><code>_payquanity</code></td><td><code>uint256</code></td><td>数量</td></tr>
<tr><td><code>_recipent</code></td><td><code>address</code></td><td>接收者</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>the result</td></tr>
</tbody></table>
</div>
<h3 id="changegoodowner"><a class="header" href="#changegoodowner">changeGoodOwner</a></h3>
<p>set good's Owner 改变商品的拥有者</p>
<pre><code class="language-solidity">function changeGoodOwner(uint256 _goodid, address _to) external returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>good's id 商品的商品ID</td></tr>
<tr><td><code>_to</code></td><td><code>address</code></td><td>recipent 接收者</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>the result</td></tr>
</tbody></table>
</div>
<h3 id="collectprotocolfee"><a class="header" href="#collectprotocolfee">collectProtocolFee</a></h3>
<p>collect protocalFee 收益协议手续费</p>
<pre><code class="language-solidity">function collectProtocolFee(uint256 _goodid) external returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>good's id 商品的商品ID</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>the result 手续费数量</td></tr>
</tbody></table>
</div>
<h3 id="addbanlist"><a class="header" href="#addbanlist">addbanlist</a></h3>
<p>add ban list  增加禁止名单</p>
<pre><code class="language-solidity">function addbanlist(address _user) external returns (bool is_success_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>address 地址</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>is_success_</code></td><td><code>bool</code></td><td>是否成功</td></tr>
</tbody></table>
</div>
<h3 id="removebanlist"><a class="header" href="#removebanlist">removebanlist</a></h3>
<p>rm ban list  移除禁止名单</p>
<pre><code class="language-solidity">function removebanlist(address _user) external returns (bool is_success_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>address 地址</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>is_success_</code></td><td><code>bool</code></td><td>是否成功</td></tr>
</tbody></table>
</div>
<h3 id="getgoodsfee"><a class="header" href="#getgoodsfee">getGoodsFee</a></h3>
<p>获取商品的用户协议手续费</p>
<pre><code class="language-solidity">function getGoodsFee(uint256 _goodid, address _user) external view returns (uint256 fee_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>商品编号</td></tr>
<tr><td><code>_user</code></td><td><code>address</code></td><td>用户地址</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>fee_</code></td><td><code>uint256</code></td><td>是否成功</td></tr>
</tbody></table>
</div>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="e_changeowner"><a class="header" href="#e_changeowner">e_changeOwner</a></h3>
<p>emitted when good's user tranfer the good to another 商品拥有者转移关系给另一人</p>
<pre><code class="language-solidity">event e_changeOwner(uint256 indexed _goodid, address _owner, address _to);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>good number,商品编号</td></tr>
<tr><td><code>_owner</code></td><td><code>address</code></td><td>the older owner,原拥有者</td></tr>
<tr><td><code>_to</code></td><td><code>address</code></td><td>the new owner,新拥有者</td></tr>
</tbody></table>
</div>
<h3 id="e_setmarketconfig"><a class="header" href="#e_setmarketconfig">e_setMarketConfig</a></h3>
<p>Config Market Config~ 进行市场配置</p>
<pre><code class="language-solidity">event e_setMarketConfig(uint256 _marketconfig);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_marketconfig</code></td><td><code>uint256</code></td><td>市场配置</td></tr>
</tbody></table>
</div>
<h3 id="e_updategoodconfig"><a class="header" href="#e_updategoodconfig">e_updateGoodConfig</a></h3>
<p>Config good 商品配置</p>
<pre><code class="language-solidity">event e_updateGoodConfig(uint256 _goodid, uint256 _goodConfig);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>Good No,商品编号</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>Good config 市场配置</td></tr>
</tbody></table>
</div>
<h3 id="e_updatetovaluegood"><a class="header" href="#e_updatetovaluegood">e_updatetoValueGood</a></h3>
<p>update good to value good~ 更新商品为价值商品</p>
<pre><code class="language-solidity">event e_updatetoValueGood(uint256 _goodid);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>good No,商品编号配</td></tr>
</tbody></table>
</div>
<h3 id="e_updatetonormalgood"><a class="header" href="#e_updatetonormalgood">e_updatetoNormalGood</a></h3>
<p>update good to normal good~ 更新商品为普通商品</p>
<pre><code class="language-solidity">event e_updatetoNormalGood(uint256 _goodid);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>good No,商品编号配</td></tr>
</tbody></table>
</div>
<h3 id="e_addbanlist"><a class="header" href="#e_addbanlist">e_addbanlist</a></h3>
<p>add ban list~添加黑名单</p>
<pre><code class="language-solidity">event e_addbanlist(address _user);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>address ~用户地址</td></tr>
</tbody></table>
</div>
<h3 id="e_removebanlist"><a class="header" href="#e_removebanlist">e_removebanlist</a></h3>
<p>remove  out address from banlist~ 移出黑名单</p>
<pre><code class="language-solidity">event e_removebanlist(address _user);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>user address ~用户地址</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="i_marketmanage"><a class="header" href="#i_marketmanage">I_MarketManage</a></h1>
<p><strong>Inherits:</strong>
<a href="Contracts/interfaces/I_MarketManage.sol//Contracts/interfaces/I_Good.sol/interface.I_Good.html">I_Good</a>, <a href="Contracts/interfaces/I_MarketManage.sol//Contracts/interfaces/I_Proof.sol/interface.I_Proof.html">I_Proof</a></p>
<p>市场管理接口 market manage interface</p>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="initmetagood"><a class="header" href="#initmetagood">initMetaGood</a></h3>
<p>initial market's first good~初始化市场中第一个商品</p>
<pre><code class="language-solidity">function initMetaGood(address _erc20address, T_BalanceUINT256 _initial, uint256 _goodconfig)
    external
    payable
    returns (uint256 metagood_no_, uint256 proof_no_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_erc20address</code></td><td><code>address</code></td><td>good's contract address~商品合约地址</td></tr>
<tr><td><code>_initial</code></td><td><code>T_BalanceUINT256</code></td><td>initial good.amount0:value,amount1:quantity~初始化的商品的参数,前128位为价值,后128位为数量.</td></tr>
<tr><td><code>_goodconfig</code></td><td><code>uint256</code></td><td>good config (detail config according to the whitepaper)~商品配置(详细配置参见技术白皮书)</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>metagood_no_</code></td><td><code>uint256</code></td><td>good_no~商品编号</td></tr>
<tr><td><code>proof_no_</code></td><td><code>uint256</code></td><td>proof_no~投资证明编号</td></tr>
</tbody></table>
</div>
<h3 id="initgood"><a class="header" href="#initgood">initGood</a></h3>
<p>initial the normal good~初始化市场中的普通商品</p>
<pre><code class="language-solidity">function initGood(
    uint256 _valuegood,
    T_BalanceUINT256 _initial,
    address _erc20address,
    uint256 _goodConfig,
    address _gater
) external payable returns (uint256 goodNo_, uint256 proofNo_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_valuegood</code></td><td><code>uint256</code></td><td>valuegood_no:measure the normal good value~价值商品编号:衡量普通商品价值</td></tr>
<tr><td><code>_initial</code></td><td><code>T_BalanceUINT256</code></td><td>initial good.amount0:normalgood quantity,amount1:valuegoodquantity~初始化的商品的参数,前128位为普通商品数量,后128位为价值商品数量.</td></tr>
<tr><td><code>_erc20address</code></td><td><code>address</code></td><td>good's contract address~商品合约地址</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>good config (detail config according to the whitepaper)~商品配置(详细配置参见技术白皮书)</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>gater address~门户地址</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodNo_</code></td><td><code>uint256</code></td><td>the_normal_good_No ~普通物品的编号</td></tr>
<tr><td><code>proofNo_</code></td><td><code>uint256</code></td><td>the_proof_of_initial_good~初始化普通物品的投资证明</td></tr>
</tbody></table>
</div>
<h3 id="buygood"><a class="header" href="#buygood">buyGood</a></h3>
<p>sell _swapQuantity units of good1 to buy good2~用户出售_swapQuantity个_goodid1去购买 _goodid2</p>
<p><em>如果购买商品1而出售商品2,开发者需求折算成使用商品2购买商品1</em></p>
<pre><code class="language-solidity">function buyGood(
    uint256 _goodid1,
    uint256 _goodid2,
    uint128 _swapQuantity,
    uint256 _limitprice,
    bool _istotal,
    address _gater
) external returns (uint128 goodid2Quantity_, uint128 goodid2FeeQuantity_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid1</code></td><td><code>uint256</code></td><td>good1's No~商品1的编号</td></tr>
<tr><td><code>_goodid2</code></td><td><code>uint256</code></td><td>good2's No~商品2的编号</td></tr>
<tr><td><code>_swapQuantity</code></td><td><code>uint128</code></td><td>good1's quantity~商品1的数量</td></tr>
<tr><td><code>_limitprice</code></td><td><code>uint256</code></td><td>trade price's limit~交易价格限制</td></tr>
<tr><td><code>_istotal</code></td><td><code>bool</code></td><td>is need trade all~是否允许全部成交</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>gater address~门户地址</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodid2Quantity_</code></td><td><code>uint128</code></td><td>实际情况</td></tr>
<tr><td><code>goodid2FeeQuantity_</code></td><td><code>uint128</code></td><td>实际情况</td></tr>
</tbody></table>
</div>
<h3 id="buygoodforpay"><a class="header" href="#buygoodforpay">buyGoodForPay</a></h3>
<p>buy _swapQuantity units of good to sell good2 and send good1 to recipent~用户购买_swapQuantity个_goodid1去出售 _goodid2并且把商品转给RECIPENT</p>
<pre><code class="language-solidity">function buyGoodForPay(
    uint256 _goodid1,
    uint256 _goodid2,
    uint128 _swapQuantity,
    uint256 _limitprice,
    address _recipent,
    address _gater
) external returns (uint128 goodid1Quantity_, uint128 goodid1FeeQuantity_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid1</code></td><td><code>uint256</code></td><td>good1's No~商品1的编号</td></tr>
<tr><td><code>_goodid2</code></td><td><code>uint256</code></td><td>good2's No~商品2的编号</td></tr>
<tr><td><code>_swapQuantity</code></td><td><code>uint128</code></td><td>buy good2's quantity~购买商品2的数量</td></tr>
<tr><td><code>_limitprice</code></td><td><code>uint256</code></td><td>trade price's limit~交易价格限制</td></tr>
<tr><td><code>_recipent</code></td><td><code>address</code></td><td>recipent~收款人</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>gater address~门户地址</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodid1Quantity_</code></td><td><code>uint128</code></td><td>good1 actual quantity~商品1实际数量</td></tr>
<tr><td><code>goodid1FeeQuantity_</code></td><td><code>uint128</code></td><td>good1 actual fee~商品1实际手续费</td></tr>
</tbody></table>
</div>
<h3 id="investgood"><a class="header" href="#investgood">investGood</a></h3>
<p>invest normal good~投资普通商品</p>
<pre><code class="language-solidity">function investGood(uint256 _togood, uint256 _valuegood, uint128 _quantity, address _gater)
    external
    returns (
        L_Good.S_GoodInvestReturn memory normalInvest_,
        L_Good.S_GoodInvestReturn memory valueInvest_,
        uint256 normalProofno_
    );
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_togood</code></td><td><code>uint256</code></td><td>normal good No~普通商品的编号</td></tr>
<tr><td><code>_valuegood</code></td><td><code>uint256</code></td><td>value good No~价值商品的编号</td></tr>
<tr><td><code>_quantity</code></td><td><code>uint128</code></td><td>invest normal good quantity~投资普通商品的数量</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>gater address~门户</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>normalInvest_</code></td><td><code>L_Good.S_GoodInvestReturn</code></td><td>normalInvest_ normalInvest_.actualFeeQuantity //actutal fee quantity 实际手续费 normalInvest_.contructFeeQuantity //contrunct fee quantity 构建手续费 normalInvest_.actualinvestValue //value of invest 实际投资价值 normalInvest_.actualinvestQuantity //the quantity of invest 实际投资数量</td></tr>
<tr><td><code>valueInvest_</code></td><td><code>L_Good.S_GoodInvestReturn</code></td><td>valueInvest_ valueInvest_.actualFeeQuantity //actutal fee quantity 实际手续费 valueInvest_.contructFeeQuantity //contrunct fee quantity 构建手续费 valueInvest_.actualinvestValue //value of invest 实际投资价值 valueInvest_.actualinvestQuantity //the quantity of invest 实际投资数量</td></tr>
<tr><td><code>normalProofno_</code></td><td><code>uint256</code></td><td>证明编号</td></tr>
</tbody></table>
</div>
<h3 id="disinvestgood"><a class="header" href="#disinvestgood">disinvestGood</a></h3>
<p>disinvest normal good~撤资普通商品</p>
<pre><code class="language-solidity">function disinvestGood(uint256 _togood, uint256 _valuegood, uint128 _goodQuantity, address _gater)
    external
    returns (
        L_Good.S_GoodDisinvestReturn memory disinvestResult1_,
        L_Good.S_GoodDisinvestReturn memory disinvestResult2_,
        uint256 proofno_
    );
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_togood</code></td><td><code>uint256</code></td><td>normal good No~普通商品编号</td></tr>
<tr><td><code>_valuegood</code></td><td><code>uint256</code></td><td>value Good No~价值商品编号</td></tr>
<tr><td><code>_goodQuantity</code></td><td><code>uint128</code></td><td>disinvest quantity~取消普通商品投资数量</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>gater address~门户</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>disinvestResult1_</code></td><td><code>L_Good.S_GoodDisinvestReturn</code></td><td>普通商品结果 disinvestResult1_.profit; // profit of stake 投资收入 disinvestResult1_.actual_fee; // actual fee 实际手续费 disinvestResult1_.actualDisinvestValue; // disinvest value  撤资价值 disinvestResult1_.actualDisinvestQuantity; //disinvest quantity 撤资数量</td></tr>
<tr><td><code>disinvestResult2_</code></td><td><code>L_Good.S_GoodDisinvestReturn</code></td><td>价值商品结果 disinvestResult2_.profit; // profit of stake 投资收入 disinvestResult2_.actual_fee; // actual fee 实际手续费 disinvestResult2_.actualDisinvestValue; // disinvest value  撤资价值 disinvestResult2_.actualDisinvestQuantity; //disinvest quantity 撤资数量</td></tr>
<tr><td><code>proofno_</code></td><td><code>uint256</code></td><td>证明编号</td></tr>
</tbody></table>
</div>
<h3 id="disinvestproof"><a class="header" href="#disinvestproof">disinvestProof</a></h3>
<p>disinvest normal good~撤资商品</p>
<pre><code class="language-solidity">function disinvestProof(uint256 _proofid, uint128 _goodQuantity, address _gater)
    external
    returns (
        L_Good.S_GoodDisinvestReturn memory disinvestResult1_,
        L_Good.S_GoodDisinvestReturn memory disinvestResult2_
    );
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofid</code></td><td><code>uint256</code></td><td>the invest proof No of normal good ~普通投资证明的编号编号</td></tr>
<tr><td><code>_goodQuantity</code></td><td><code>uint128</code></td><td>disinvest quantity~取消普通商品投资数量</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>gater address~门户</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>disinvestResult1_</code></td><td><code>L_Good.S_GoodDisinvestReturn</code></td><td>普通商品结果 disinvestResult1_.profit; // profit of stake 投资收入 disinvestResult1_.actual_fee; // actual fee 实际手续费 disinvestResult1_.actualDisinvestValue; // disinvest value  撤资价值 disinvestResult1_.actualDisinvestQuantity; //disinvest quantity 撤资数量</td></tr>
<tr><td><code>disinvestResult2_</code></td><td><code>L_Good.S_GoodDisinvestReturn</code></td><td>价值商品结果 disinvestResult2_.profit; // profit of stake 投资收入 disinvestResult2_.actual_fee; // actual fee 实际手续费 disinvestResult2_.actualDisinvestValue; // disinvest value  撤资价值 disinvestResult2_.actualDisinvestQuantity; //disinvest quantity 撤资数量</td></tr>
</tbody></table>
</div>
<h3 id="collectprooffee"><a class="header" href="#collectprooffee">collectProofFee</a></h3>
<p>collect the profit of normal proof~提取普通投资证明的收益</p>
<pre><code class="language-solidity">function collectProofFee(uint256 _proofid) external returns (T_BalanceUINT256 profit_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofid</code></td><td><code>uint256</code></td><td>the proof No of invest normal good~普通投资证明编号</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>profit_</code></td><td><code>T_BalanceUINT256</code></td><td>amount0 普通商品的投资收益 amount1价值商品的投资收益</td></tr>
</tbody></table>
</div>
<h2 id="events-1"><a class="header" href="#events-1">Events</a></h2>
<h3 id="e_initmetagood"><a class="header" href="#e_initmetagood">e_initMetaGood</a></h3>
<p>emit when metaGood create :当用户创建初始化商品时</p>
<p><em>_initial.amount0()'s decimal default 6 ~默认价值的精度为6</em></p>
<pre><code class="language-solidity">event e_initMetaGood(
    uint256 indexed _proofNo, uint256 _goodNo, address _erc20address, uint256 _goodConfig, T_BalanceUINT256 _initial
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofNo</code></td><td><code>uint256</code></td><td>value invest proof No~投资证明的编号</td></tr>
<tr><td><code>_goodNo</code></td><td><code>uint256</code></td><td>good's id  商品的商品编号</td></tr>
<tr><td><code>_erc20address</code></td><td><code>address</code></td><td>metagood contract address 元商品的合约地址</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>metagood's config refer white paper~元商品的配置,具体参见白皮书</td></tr>
<tr><td><code>_initial</code></td><td><code>T_BalanceUINT256</code></td><td>market intial para: amount0 value  amount1:quantity~市场初始化参数:amount0为价值,amount1为数量.</td></tr>
</tbody></table>
</div>
<h3 id="e_initgood"><a class="header" href="#e_initgood">e_initGood</a></h3>
<p>emit when  good create :当用户创建初始化商品时</p>
<pre><code class="language-solidity">event e_initGood(
    uint256 indexed _proofNo,
    uint256 _normalgoodNo,
    uint256 _valuegoodNo,
    address _erc20address,
    uint256 _goodConfig,
    T_BalanceUINT256 _normalinitial,
    T_BalanceUINT256 _value
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofNo</code></td><td><code>uint256</code></td><td>value invest proof No~投资证明的编号</td></tr>
<tr><td><code>_normalgoodNo</code></td><td><code>uint256</code></td><td>good's id  商品的商品编号</td></tr>
<tr><td><code>_valuegoodNo</code></td><td><code>uint256</code></td><td>good's id  商品的商品编号</td></tr>
<tr><td><code>_erc20address</code></td><td><code>address</code></td><td>metagood contract address 元商品的合约地址</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>metagood's config refer white paper~元商品的配置,具体参见白皮书</td></tr>
<tr><td><code>_normalinitial</code></td><td><code>T_BalanceUINT256</code></td><td>amount0 quantity  amount1:value~普通商品:amount0为数量,amount1为价值.</td></tr>
<tr><td><code>_value</code></td><td><code>T_BalanceUINT256</code></td><td>amount0():valuegoodfee, amount1 valuegoodquantity~amount0为价值商品投资费用,amount1为价值商品投资数量.</td></tr>
</tbody></table>
</div>
<h3 id="e_buygood"><a class="header" href="#e_buygood">e_buyGood</a></h3>
<p>emit when customer buy good :当用户购买商品时触发</p>
<pre><code class="language-solidity">event e_buyGood(
    uint256 indexed sellgood,
    uint256 indexed forgood,
    address fromer,
    uint128 swapvalue,
    T_BalanceUINT256 sellgoodstate,
    T_BalanceUINT256 forgoodstate
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sellgood</code></td><td><code>uint256</code></td><td>good's id  商品的商品ID</td></tr>
<tr><td><code>forgood</code></td><td><code>uint256</code></td><td>initial good,amount0:value,amount1:quantity 初始化的商品的参数,前128位为价值,后128位为数量.</td></tr>
<tr><td><code>fromer</code></td><td><code>address</code></td><td>seller or buyer address 卖家或买家地址</td></tr>
<tr><td><code>swapvalue</code></td><td><code>uint128</code></td><td>trade value  交易价值</td></tr>
<tr><td><code>sellgoodstate</code></td><td><code>T_BalanceUINT256</code></td><td>the sellgood status amount0:fee,amount1:quantity 使用商品的交易结果 amount0:手续费,amount1:数量</td></tr>
<tr><td><code>forgoodstate</code></td><td><code>T_BalanceUINT256</code></td><td>the forgood status amount0:fee,amount1:quantity 获得商品的交易结果amount0:手续费,amount1:数量</td></tr>
</tbody></table>
</div>
<h3 id="e_buygoodforpay"><a class="header" href="#e_buygoodforpay">e_buyGoodForPay</a></h3>
<p>emit when customer buy good pay to the seller :当用户购买商品支付给卖家时触发</p>
<pre><code class="language-solidity">event e_buyGoodForPay(
    uint256 indexed buygood,
    uint256 indexed usegood,
    address fromer,
    address receipt,
    uint128 swapvalue,
    T_BalanceUINT256 buygoodstate,
    T_BalanceUINT256 usegoodstate
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>buygood</code></td><td><code>uint256</code></td><td>good's id  商品的商品ID</td></tr>
<tr><td><code>usegood</code></td><td><code>uint256</code></td><td>initial good,amount0:value,amount1:quantity 初始化的商品的参数,前128位为价值,后128位为数量.</td></tr>
<tr><td><code>fromer</code></td><td><code>address</code></td><td>seller or buyer address 卖家或买家地址</td></tr>
<tr><td><code>receipt</code></td><td><code>address</code></td><td>receipt  收款方</td></tr>
<tr><td><code>swapvalue</code></td><td><code>uint128</code></td><td>trade value  交易价值</td></tr>
<tr><td><code>buygoodstate</code></td><td><code>T_BalanceUINT256</code></td><td>the buygood status amount0:fee,amount1:quantity 使用商品的交易结果 amount0:手续费,amount1:数量</td></tr>
<tr><td><code>usegoodstate</code></td><td><code>T_BalanceUINT256</code></td><td>the usegood status amount0:fee,amount1:quantity 获得商品的交易结果amount0:手续费,amount1:数量</td></tr>
</tbody></table>
</div>
<h3 id="e_investgood"><a class="header" href="#e_investgood">e_investGood</a></h3>
<p>emit when customer invest normal good :当用户投资普通商品</p>
<pre><code class="language-solidity">event e_investGood(
    uint256 indexed _proofNo,
    uint256 _normalGoodNo,
    uint256 _valueGoodNo,
    T_BalanceUINT256 _invest,
    T_BalanceUINT256 _valueinvest
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofNo</code></td><td><code>uint256</code></td><td>proof No~投资证明编号</td></tr>
<tr><td><code>_normalGoodNo</code></td><td><code>uint256</code></td><td>normal good no~普通商品编号</td></tr>
<tr><td><code>_valueGoodNo</code></td><td><code>uint256</code></td><td>value good no~价值商品编号</td></tr>
<tr><td><code>_invest</code></td><td><code>T_BalanceUINT256</code></td><td>amount0 normal good actual fee ,amount1 normal good actual invest quantity~amount0为投资手续费,amount1为投资数量</td></tr>
<tr><td><code>_valueinvest</code></td><td><code>T_BalanceUINT256</code></td><td>amount0 value good actual fee ,amount1 value good actual invest quantity~amount0为投资手续费,amount1为投资数量</td></tr>
</tbody></table>
</div>
<h3 id="e_disinvestproof"><a class="header" href="#e_disinvestproof">e_disinvestProof</a></h3>
<p>emit when customer disinvest normal good :当用户撤资普通商品</p>
<pre><code class="language-solidity">event e_disinvestProof(
    uint256 indexed _proofNo,
    uint256 _normalGoodNo,
    uint256 _valueGoodNo,
    T_BalanceUINT256 _normalgood,
    T_BalanceUINT256 _valuegood,
    T_BalanceUINT256 _profit
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofNo</code></td><td><code>uint256</code></td><td>proof No~投资证明编号</td></tr>
<tr><td><code>_normalGoodNo</code></td><td><code>uint256</code></td><td>value good no~价值商品编号</td></tr>
<tr><td><code>_valueGoodNo</code></td><td><code>uint256</code></td><td>value good no~价值商品编号</td></tr>
<tr><td><code>_normalgood</code></td><td><code>T_BalanceUINT256</code></td><td>amount0 actual fee ,amount1 actual invest quantity~amount0为撤资手续费,amount1为撤资数量</td></tr>
<tr><td><code>_valuegood</code></td><td><code>T_BalanceUINT256</code></td><td>amount0 actual fee ,amount1 actual invest quantity~amount0为撤资手续费,amount1为撤资数量</td></tr>
<tr><td><code>_profit</code></td><td><code>T_BalanceUINT256</code></td><td>profit~收益</td></tr>
</tbody></table>
</div>
<h3 id="e_collectprooffee"><a class="header" href="#e_collectprooffee">e_collectProofFee</a></h3>
<p>emit when customer disinvest normal good :当用户撤资普通商品</p>
<pre><code class="language-solidity">event e_collectProofFee(
    uint256 indexed _proofNo,
    uint256 _normalGoodNo,
    uint256 _valueGoodNo,
    T_BalanceUINT256 _profit,
    T_BalanceUINT256 _protocalfee
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofNo</code></td><td><code>uint256</code></td><td>proof No~投资证明编号</td></tr>
<tr><td><code>_normalGoodNo</code></td><td><code>uint256</code></td><td>value good no~价值商品编号</td></tr>
<tr><td><code>_valueGoodNo</code></td><td><code>uint256</code></td><td>value good no~价值商品编号</td></tr>
<tr><td><code>_profit</code></td><td><code>T_BalanceUINT256</code></td><td>profit  amount0:normalprofit  amount1:valueprofit</td></tr>
<tr><td><code>_protocalfee</code></td><td><code>T_BalanceUINT256</code></td><td>protocalfee  amount0:normalprofit  amount1:valueprofit</td></tr>
</tbody></table>
</div>
<h2 id="errors"><a class="header" href="#errors">Errors</a></h2>
<h3 id="err_total"><a class="header" href="#err_total">err_total</a></h3>
<pre><code class="language-solidity">error err_total();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="i_proof"><a class="header" href="#i_proof">I_Proof</a></h1>
<p><strong>Inherits:</strong>
IERC721, IERC721Metadata, IERC721Enumerable</p>
<p>包含商品的一系列接口  contain good's all interfaces</p>
<h2 id="functions-2"><a class="header" href="#functions-2">Functions</a></h2>
<h3 id="totalsupply"><a class="header" href="#totalsupply">totalSupply</a></h3>
<p>Returns the total number of market's proof 返回市场证明总数</p>
<pre><code class="language-solidity">function totalSupply() external view returns (uint256 proofnum_);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proofnum_</code></td><td><code>uint256</code></td><td>The address of the factory manager</td></tr>
</tbody></table>
</div>
<h3 id="getproofid"><a class="header" href="#getproofid">getProofId</a></h3>
<p>get the invest proof'id ~ 获取投资证明ID</p>
<pre><code class="language-solidity">function getProofId(S_ProofKey calldata _investproofkey) external view returns (uint256 proof_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_investproofkey</code></td><td><code>S_ProofKey</code></td><td>生成投资证明的参数据</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proof_</code></td><td><code>uint256</code></td><td>投资证明的ID</td></tr>
</tbody></table>
</div>
<h3 id="changeproofowner"><a class="header" href="#changeproofowner">changeProofOwner</a></h3>
<p>改变投资证明的拥有者</p>
<pre><code class="language-solidity">function changeProofOwner(uint256 _proofid, address _to) external returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofid</code></td><td><code>uint256</code></td><td>生成投资证明的参数据</td></tr>
<tr><td><code>_to</code></td><td><code>address</code></td><td>生成投资证明的参数据</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>proof_ 投资证明的ID</td></tr>
</tbody></table>
</div>
<h3 id="getproofstate"><a class="header" href="#getproofstate">getProofState</a></h3>
<p>get the invest proof'id 获取投资证明ID详情</p>
<pre><code class="language-solidity">function getProofState(uint256 _proof) external view returns (L_Proof.S_ProofState memory proof_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proof</code></td><td><code>uint256</code></td><td>证明编号</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proof_</code></td><td><code>L_Proof.S_ProofState</code></td><td>证明信息</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="i_referer"><a class="header" href="#i_referer">I_Referer</a></h1>
<h2 id="functions-3"><a class="header" href="#functions-3">Functions</a></h2>
<h3 id="addreferer"><a class="header" href="#addreferer">addreferer</a></h3>
<p>user add referer~用户添加推荐人</p>
<pre><code class="language-solidity">function addreferer(address _referer) external returns (bool is_success_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_referer</code></td><td><code>address</code></td><td>address or referer~推荐人地址</td></tr>
</tbody></table>
</div>
<h2 id="events-2"><a class="header" href="#events-2">Events</a></h2>
<h3 id="e_addreferer"><a class="header" href="#e_addreferer">e_addreferer</a></h3>
<p>user addrefer~ 用户添加推荐人</p>
<pre><code class="language-solidity">event e_addreferer(address _user, address _referer);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>User address,用户地址</td></tr>
<tr><td><code>_referer</code></td><td><code>address</code></td><td>referer address,推荐人地址</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="contents-1"><a class="header" href="#contents-1">Contents</a></h1>
<ul>
<li><a href="Contracts/libraries/L_ArrayStorage.sol/library.L_ArrayStorage.html">L_ArrayStorage</a></li>
<li><a href="Contracts/libraries/L_BalanceUINT256.sol/type.T_BalanceUINT256.html">T_BalanceUINT256</a></li>
<li><a href="Contracts/libraries/L_BalanceUINT256.sol/library.L_BalanceUINT256Library.html">L_BalanceUINT256Library</a></li>
<li><a href="Contracts/libraries/L_BalanceUINT256.sol/function.toBalanceUINT256.html">toBalanceUINT256</a></li>
<li><a href="Contracts/libraries/L_BalanceUINT256.sol/function.lowerprice.html">lowerprice</a></li>
<li><a href="Contracts/libraries/L_BalanceUINT256.sol/function.subadd.html">subadd</a></li>
<li><a href="Contracts/libraries/L_BalanceUINT256.sol/function.sub.html">sub</a></li>
<li><a href="Contracts/libraries/L_BalanceUINT256.sol/function.addsub.html">addsub</a></li>
<li><a href="Contracts/libraries/L_BalanceUINT256.sol/function.add.html">add</a></li>
<li><a href="Contracts/libraries/L_Currency.sol/library.L_CurrencyLibrary.html">L_CurrencyLibrary</a></li>
<li><a href="Contracts/libraries/L_Good.sol/library.L_Good.html">L_Good</a></li>
<li><a href="Contracts/libraries/L_Good.sol/library.L_GoodIdLibrary.html">L_GoodIdLibrary</a></li>
<li><a href="Contracts/libraries/L_GoodConfig.sol/library.L_GoodConfigLibrary.html">L_GoodConfigLibrary</a></li>
<li><a href="Contracts/libraries/L_MarketConfig.sol/library.L_MarketConfigLibrary.html">L_MarketConfigLibrary</a></li>
<li><a href="Contracts/libraries/L_Proof.sol/library.L_Proof.html">L_Proof</a></li>
<li><a href="Contracts/libraries/L_Proof.sol/library.L_ProofIdLibrary.html">L_ProofIdLibrary</a></li>
<li><a href="Contracts/libraries/L_Struct.sol/struct.S_GoodKey.html">S_GoodKey</a></li>
<li><a href="Contracts/libraries/L_Struct.sol/struct.S_ProofKey.html">S_ProofKey</a></li>
<li><a href="Contracts/libraries/L_Struct.sol/struct.S_Ralate.html">S_Ralate</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="l_arraystorage"><a class="header" href="#l_arraystorage">L_ArrayStorage</a></h1>
<h2 id="functions-4"><a class="header" href="#functions-4">Functions</a></h2>
<h3 id="addvalue"><a class="header" href="#addvalue">addvalue</a></h3>
<pre><code class="language-solidity">function addvalue(S_ArrayStorage storage _self, uint256 _value) internal;
</code></pre>
<h3 id="removevalue"><a class="header" href="#removevalue">removevalue</a></h3>
<pre><code class="language-solidity">function removevalue(S_ArrayStorage storage _self, uint256 _value) internal;
</code></pre>
<h3 id="removekey"><a class="header" href="#removekey">removekey</a></h3>
<pre><code class="language-solidity">function removekey(S_ArrayStorage storage _self, uint256 _key) internal;
</code></pre>
<h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<h3 id="s_arraystorage"><a class="header" href="#s_arraystorage">S_ArrayStorage</a></h3>
<pre><code class="language-solidity">struct S_ArrayStorage {
    uint256 key;
    mapping(uint256 =&gt; uint256) key_value;
    mapping(uint256 =&gt; uint256) value_key;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="t_balanceuint256"><a class="header" href="#t_balanceuint256">T_BalanceUINT256</a></h1>
<pre><code class="language-solidity">type T_BalanceUINT256 is uint256;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="l_balanceuint256library"><a class="header" href="#l_balanceuint256library">L_BalanceUINT256Library</a></h1>
<h2 id="functions-5"><a class="header" href="#functions-5">Functions</a></h2>
<h3 id="amount0"><a class="header" href="#amount0">amount0</a></h3>
<pre><code class="language-solidity">function amount0(T_BalanceUINT256 balanceDelta) internal pure returns (uint128 _amount0);
</code></pre>
<h3 id="amount1"><a class="header" href="#amount1">amount1</a></h3>
<pre><code class="language-solidity">function amount1(T_BalanceUINT256 balanceDelta) internal pure returns (uint128 _amount1);
</code></pre>
<h3 id="getamount0fromamount1"><a class="header" href="#getamount0fromamount1">getamount0fromamount1</a></h3>
<pre><code class="language-solidity">function getamount0fromamount1(T_BalanceUINT256 balanceDelta, uint128 amount1delta)
    internal
    pure
    returns (uint128 _amount0);
</code></pre>
<h3 id="getamount1fromamount0"><a class="header" href="#getamount1fromamount0">getamount1fromamount0</a></h3>
<pre><code class="language-solidity">function getamount1fromamount0(T_BalanceUINT256 balanceDelta, uint128 amount0delta)
    internal
    pure
    returns (uint128 _amount1);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tobalanceuint256"><a class="header" href="#tobalanceuint256">toBalanceUINT256</a></h1>
<pre><code class="language-solidity">function toBalanceUINT256(uint128 _amount0, uint128 _amount1) pure returns (T_BalanceUINT256 balanceDelta);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="lowerprice"><a class="header" href="#lowerprice">lowerprice</a></h1>
<pre><code class="language-solidity">function lowerprice(T_BalanceUINT256 a, T_BalanceUINT256 b, T_BalanceUINT256 c) pure returns (bool);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="subadd"><a class="header" href="#subadd">subadd</a></h1>
<pre><code class="language-solidity">function subadd(T_BalanceUINT256 a, T_BalanceUINT256 b) pure returns (T_BalanceUINT256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sub"><a class="header" href="#sub">sub</a></h1>
<pre><code class="language-solidity">function sub(T_BalanceUINT256 a, T_BalanceUINT256 b) pure returns (T_BalanceUINT256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="addsub"><a class="header" href="#addsub">addsub</a></h1>
<pre><code class="language-solidity">function addsub(T_BalanceUINT256 a, T_BalanceUINT256 b) pure returns (T_BalanceUINT256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="add"><a class="header" href="#add">add</a></h1>
<pre><code class="language-solidity">function add(T_BalanceUINT256 a, T_BalanceUINT256 b) pure returns (T_BalanceUINT256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="l_currencylibrary"><a class="header" href="#l_currencylibrary">L_CurrencyLibrary</a></h1>
<p><em>This library allows for transferring and holding native tokens and ERC20 tokens</em></p>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="native"><a class="header" href="#native">NATIVE</a></h3>
<pre><code class="language-solidity">address public constant NATIVE = address(0);
</code></pre>
<h2 id="functions-6"><a class="header" href="#functions-6">Functions</a></h2>
<h3 id="transferfrom"><a class="header" href="#transferfrom">transferFrom</a></h3>
<pre><code class="language-solidity">function transferFrom(address token, address from, uint256 amount) internal;
</code></pre>
<h3 id="safetransfer"><a class="header" href="#safetransfer">safeTransfer</a></h3>
<pre><code class="language-solidity">function safeTransfer(address currency, address to, uint256 amount) internal;
</code></pre>
<h3 id="isnative"><a class="header" href="#isnative">isNative</a></h3>
<pre><code class="language-solidity">function isNative(address currency) internal pure returns (bool);
</code></pre>
<h2 id="errors-1"><a class="header" href="#errors-1">Errors</a></h2>
<h3 id="nativetransferfailed"><a class="header" href="#nativetransferfailed">NativeTransferFailed</a></h3>
<p>Thrown when a native transfer fails</p>
<pre><code class="language-solidity">error NativeTransferFailed();
</code></pre>
<h3 id="valuetobiggerthanuint128"><a class="header" href="#valuetobiggerthanuint128">ValueToBiggerthanUint128</a></h3>
<pre><code class="language-solidity">error ValueToBiggerthanUint128();
</code></pre>
<h3 id="erc20transferfailed"><a class="header" href="#erc20transferfailed">ERC20TransferFailed</a></h3>
<p>Thrown when an ERC20 transfer fails</p>
<pre><code class="language-solidity">error ERC20TransferFailed();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="l_good"><a class="header" href="#l_good">L_Good</a></h1>
<h2 id="functions-7"><a class="header" href="#functions-7">Functions</a></h2>
<h3 id="getmaxtradevalue"><a class="header" href="#getmaxtradevalue">getMaxTradeValue</a></h3>
<pre><code class="language-solidity">function getMaxTradeValue(S_GoodState storage self) internal view returns (uint128);
</code></pre>
<h3 id="getmaxtradequnitity"><a class="header" href="#getmaxtradequnitity">getMaxTradeQunitity</a></h3>
<pre><code class="language-solidity">function getMaxTradeQunitity(S_GoodState storage self) internal view returns (uint128);
</code></pre>
<h3 id="updatetovaluegood-1"><a class="header" href="#updatetovaluegood-1">updateToValueGood</a></h3>
<pre><code class="language-solidity">function updateToValueGood(S_GoodState storage self) internal;
</code></pre>
<h3 id="updatetonormalgood-1"><a class="header" href="#updatetonormalgood-1">updateToNormalGood</a></h3>
<pre><code class="language-solidity">function updateToNormalGood(S_GoodState storage self) internal;
</code></pre>
<h3 id="updategoodconfig-1"><a class="header" href="#updategoodconfig-1">updateGoodConfig</a></h3>
<pre><code class="language-solidity">function updateGoodConfig(S_GoodState storage _self, uint256 _goodConfig) internal;
</code></pre>
<h3 id="init"><a class="header" href="#init">init</a></h3>
<pre><code class="language-solidity">function init(S_GoodState storage self, T_BalanceUINT256 _init, address _erc20address, uint256 _goodConfig) internal;
</code></pre>
<h3 id="swapcompute1"><a class="header" href="#swapcompute1">swapCompute1</a></h3>
<pre><code class="language-solidity">function swapCompute1(swapCache memory _stepCache, T_BalanceUINT256 _limitPrice)
    internal
    pure
    returns (swapCache memory);
</code></pre>
<h3 id="swapcompute2"><a class="header" href="#swapcompute2">swapCompute2</a></h3>
<pre><code class="language-solidity">function swapCompute2(swapCache memory _stepCache, T_BalanceUINT256 _limitPrice)
    internal
    pure
    returns (swapCache memory);
</code></pre>
<h3 id="swapcommit"><a class="header" href="#swapcommit">swapCommit</a></h3>
<pre><code class="language-solidity">function swapCommit(
    S_GoodState storage _self,
    T_BalanceUINT256 _swapstate,
    uint128 _fee,
    uint256 _marketconfig,
    S_Ralate memory _ralate
) internal;
</code></pre>
<h3 id="investgood-1"><a class="header" href="#investgood-1">investGood</a></h3>
<pre><code class="language-solidity">function investGood(S_GoodState storage _self, uint128 _invest, uint256 _marketConfig, S_Ralate memory _ralate)
    internal
    returns (S_GoodInvestReturn memory investResult_);
</code></pre>
<h3 id="disinvestgood-1"><a class="header" href="#disinvestgood-1">disinvestGood</a></h3>
<pre><code class="language-solidity">function disinvestGood(
    S_GoodState storage _self,
    S_GoodState storage _valueGoodState,
    L_Proof.S_ProofState storage _investProof,
    uint128 _goodQuantity,
    uint256 _marketconfig,
    S_Ralate memory _ralate
) internal returns (S_GoodDisinvestReturn memory normalGoodResult1_, S_GoodDisinvestReturn memory valueGoodResult2_);
</code></pre>
<h3 id="collectgoodfee"><a class="header" href="#collectgoodfee">collectGoodFee</a></h3>
<pre><code class="language-solidity">function collectGoodFee(
    S_GoodState storage _self,
    S_GoodState storage _valuegood,
    L_Proof.S_ProofState storage _investProof
) internal returns (T_BalanceUINT256 profit);
</code></pre>
<h3 id="allocatefee"><a class="header" href="#allocatefee">allocateFee</a></h3>
<pre><code class="language-solidity">function allocateFee(
    S_GoodState storage _self,
    uint128 _actualFeeQuantity,
    uint256 _marketconfig,
    S_Ralate memory _ralate
) private;
</code></pre>
<h2 id="structs-1"><a class="header" href="#structs-1">Structs</a></h2>
<h3 id="s_goodstate"><a class="header" href="#s_goodstate">S_GoodState</a></h3>
<pre><code class="language-solidity">struct S_GoodState {
    uint256 goodConfig;
    address owner;
    address erc20address;
    T_BalanceUINT256 currentState;
    T_BalanceUINT256 investState;
    T_BalanceUINT256 feeQunitityState;
    mapping(address =&gt; uint256) fees;
}
</code></pre>
<h3 id="s_goodtmpstate"><a class="header" href="#s_goodtmpstate">S_GoodTmpState</a></h3>
<pre><code class="language-solidity">struct S_GoodTmpState {
    uint256 goodConfig;
    address owner;
    address erc20address;
    T_BalanceUINT256 currentState;
    T_BalanceUINT256 investState;
    T_BalanceUINT256 feeQunitityState;
}
</code></pre>
<h3 id="s_goodinvestreturn"><a class="header" href="#s_goodinvestreturn">S_GoodInvestReturn</a></h3>
<pre><code class="language-solidity">struct S_GoodInvestReturn {
    uint128 actualFeeQuantity;
    uint128 contructFeeQuantity;
    uint128 actualInvestValue;
    uint128 actualInvestQuantity;
}
</code></pre>
<h3 id="s_gooddisinvestreturn"><a class="header" href="#s_gooddisinvestreturn">S_GoodDisinvestReturn</a></h3>
<pre><code class="language-solidity">struct S_GoodDisinvestReturn {
    uint128 profit;
    uint128 actual_fee;
    uint128 actualDisinvestValue;
    uint128 actualDisinvestQuantity;
}
</code></pre>
<h3 id="swapcache"><a class="header" href="#swapcache">swapCache</a></h3>
<pre><code class="language-solidity">struct swapCache {
    uint128 remainQuantity;
    uint128 outputQuantity;
    uint128 feeQuantity;
    uint128 swapvalue;
    T_BalanceUINT256 good1currentState;
    uint256 good1config;
    T_BalanceUINT256 good2currentState;
    uint256 good2config;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="l_goodidlibrary"><a class="header" href="#l_goodidlibrary">L_GoodIdLibrary</a></h1>
<h2 id="functions-8"><a class="header" href="#functions-8">Functions</a></h2>
<h3 id="toid"><a class="header" href="#toid">toId</a></h3>
<pre><code class="language-solidity">function toId(S_GoodKey memory goodKey) internal pure returns (bytes32);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="l_goodconfiglibrary"><a class="header" href="#l_goodconfiglibrary">L_GoodConfigLibrary</a></h1>
<h2 id="functions-9"><a class="header" href="#functions-9">Functions</a></h2>
<h3 id="isvaluegood"><a class="header" href="#isvaluegood">isvaluegood</a></h3>
<pre><code class="language-solidity">function isvaluegood(uint256 config) internal pure returns (bool a);
</code></pre>
<h3 id="getinvestfee"><a class="header" href="#getinvestfee">getInvestFee</a></h3>
<pre><code class="language-solidity">function getInvestFee(uint256 config) internal pure returns (uint16 a);
</code></pre>
<h3 id="getinvestfee-1"><a class="header" href="#getinvestfee-1">getInvestFee</a></h3>
<pre><code class="language-solidity">function getInvestFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<h3 id="getinvestfulfee"><a class="header" href="#getinvestfulfee">getInvestFulFee</a></h3>
<pre><code class="language-solidity">function getInvestFulFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<h3 id="getdisinvestfee"><a class="header" href="#getdisinvestfee">getDisinvestFee</a></h3>
<pre><code class="language-solidity">function getDisinvestFee(uint256 config) internal pure returns (uint16 a);
</code></pre>
<h3 id="getdisinvestfee-1"><a class="header" href="#getdisinvestfee-1">getDisinvestFee</a></h3>
<pre><code class="language-solidity">function getDisinvestFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<h3 id="getbuyfee"><a class="header" href="#getbuyfee">getBuyFee</a></h3>
<pre><code class="language-solidity">function getBuyFee(uint256 config) internal pure returns (uint16 a);
</code></pre>
<h3 id="getbuyfee-1"><a class="header" href="#getbuyfee-1">getBuyFee</a></h3>
<pre><code class="language-solidity">function getBuyFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<h3 id="getsellfee"><a class="header" href="#getsellfee">getSellFee</a></h3>
<pre><code class="language-solidity">function getSellFee(uint256 config) internal pure returns (uint16 a);
</code></pre>
<h3 id="getsellfee-1"><a class="header" href="#getsellfee-1">getSellFee</a></h3>
<pre><code class="language-solidity">function getSellFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<h3 id="getswapchips"><a class="header" href="#getswapchips">getSwapChips</a></h3>
<pre><code class="language-solidity">function getSwapChips(uint256 config) internal pure returns (uint16 a);
</code></pre>
<h3 id="getswapchips-1"><a class="header" href="#getswapchips-1">getSwapChips</a></h3>
<pre><code class="language-solidity">function getSwapChips(uint256 config, uint128 amount) internal pure returns (uint128);
</code></pre>
<h3 id="getdisinvestchips"><a class="header" href="#getdisinvestchips">getDisinvestChips</a></h3>
<pre><code class="language-solidity">function getDisinvestChips(uint256 config) internal pure returns (uint16 a);
</code></pre>
<h3 id="getdisinvestchips-1"><a class="header" href="#getdisinvestchips-1">getDisinvestChips</a></h3>
<pre><code class="language-solidity">function getDisinvestChips(uint256 config, uint128 amount) internal pure returns (uint128);
</code></pre>
<h3 id="getgoodtype"><a class="header" href="#getgoodtype">getGoodType</a></h3>
<pre><code class="language-solidity">function getGoodType(uint256 config) internal pure returns (uint128 a);
</code></pre>
<h3 id="gettell"><a class="header" href="#gettell">getTell</a></h3>
<pre><code class="language-solidity">function getTell(uint256 config) internal pure returns (uint128 a);
</code></pre>
<h3 id="getlongitude"><a class="header" href="#getlongitude">getLongitude</a></h3>
<pre><code class="language-solidity">function getLongitude(uint256 config) internal pure returns (uint128 a);
</code></pre>
<h3 id="getlatitude"><a class="header" href="#getlatitude">getLatitude</a></h3>
<pre><code class="language-solidity">function getLatitude(uint256 config) internal pure returns (uint128 a);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="l_marketconfiglibrary"><a class="header" href="#l_marketconfiglibrary">L_MarketConfigLibrary</a></h1>
<p>Library for computing the ID of a pool</p>
<h2 id="functions-10"><a class="header" href="#functions-10">Functions</a></h2>
<h3 id="getliquidfee"><a class="header" href="#getliquidfee">getLiquidFee</a></h3>
<pre><code class="language-solidity">function getLiquidFee(uint256 config) internal pure returns (uint8 a);
</code></pre>
<h3 id="getliquidfee-1"><a class="header" href="#getliquidfee-1">getLiquidFee</a></h3>
<pre><code class="language-solidity">function getLiquidFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<h3 id="getsellerfee"><a class="header" href="#getsellerfee">getSellerFee</a></h3>
<pre><code class="language-solidity">function getSellerFee(uint256 config) internal pure returns (uint8 a);
</code></pre>
<h3 id="getsellerfee-1"><a class="header" href="#getsellerfee-1">getSellerFee</a></h3>
<pre><code class="language-solidity">function getSellerFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<h3 id="getgaterfee"><a class="header" href="#getgaterfee">getGaterFee</a></h3>
<pre><code class="language-solidity">function getGaterFee(uint256 config) internal pure returns (uint8 a);
</code></pre>
<h3 id="getgaterfee-1"><a class="header" href="#getgaterfee-1">getGaterFee</a></h3>
<pre><code class="language-solidity">function getGaterFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<h3 id="getreferfee"><a class="header" href="#getreferfee">getReferFee</a></h3>
<pre><code class="language-solidity">function getReferFee(uint256 config) internal pure returns (uint8 a);
</code></pre>
<h3 id="getreferfee-1"><a class="header" href="#getreferfee-1">getReferFee</a></h3>
<pre><code class="language-solidity">function getReferFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<h3 id="getcustomerfee"><a class="header" href="#getcustomerfee">getCustomerFee</a></h3>
<pre><code class="language-solidity">function getCustomerFee(uint256 config) internal pure returns (uint8 a);
</code></pre>
<h3 id="getcustomerfee-1"><a class="header" href="#getcustomerfee-1">getCustomerFee</a></h3>
<pre><code class="language-solidity">function getCustomerFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<h3 id="getplatfee"><a class="header" href="#getplatfee">getPlatFee</a></h3>
<pre><code class="language-solidity">function getPlatFee(uint256 config) internal pure returns (uint8 a);
</code></pre>
<h3 id="getplatfee128"><a class="header" href="#getplatfee128">getPlatFee128</a></h3>
<pre><code class="language-solidity">function getPlatFee128(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<h3 id="getplatfee256"><a class="header" href="#getplatfee256">getPlatFee256</a></h3>
<pre><code class="language-solidity">function getPlatFee256(uint256 config, uint256 amount) internal pure returns (uint256 a);
</code></pre>
<h3 id="checkallocate"><a class="header" href="#checkallocate">checkAllocate</a></h3>
<pre><code class="language-solidity">function checkAllocate(uint256 config) internal pure returns (bool);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="l_proof"><a class="header" href="#l_proof">L_Proof</a></h1>
<h2 id="functions-11"><a class="header" href="#functions-11">Functions</a></h2>
<h3 id="updateinvest"><a class="header" href="#updateinvest">updateInvest</a></h3>
<pre><code class="language-solidity">function updateInvest(
    S_ProofState storage _self,
    uint256 _currenctgood,
    uint256 _valuegood,
    T_BalanceUINT256 _state,
    T_BalanceUINT256 _invest,
    T_BalanceUINT256 _valueinvest
) internal;
</code></pre>
<h3 id="burnproof"><a class="header" href="#burnproof">burnProof</a></h3>
<pre><code class="language-solidity">function burnProof(S_ProofState storage _self, uint128 _value) internal;
</code></pre>
<h3 id="muldiv"><a class="header" href="#muldiv">mulDiv</a></h3>
<pre><code class="language-solidity">function mulDiv(uint256 config, uint256 amount, uint256 domitor) internal pure returns (uint128 a);
</code></pre>
<h3 id="_approve"><a class="header" href="#_approve">_approve</a></h3>
<pre><code class="language-solidity">function _approve(S_ProofState storage _self, address to) internal;
</code></pre>
<h3 id="collectprooffee-1"><a class="header" href="#collectprooffee-1">collectProofFee</a></h3>
<pre><code class="language-solidity">function collectProofFee(S_ProofState storage _self, T_BalanceUINT256 profit) internal;
</code></pre>
<h2 id="structs-2"><a class="header" href="#structs-2">Structs</a></h2>
<h3 id="s_proofstate"><a class="header" href="#s_proofstate">S_ProofState</a></h3>
<pre><code class="language-solidity">struct S_ProofState {
    address owner;
    uint256 currentgood;
    uint256 valuegood;
    T_BalanceUINT256 state;
    T_BalanceUINT256 invest;
    T_BalanceUINT256 valueinvest;
    address approval;
    address beneficiary;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="l_proofidlibrary"><a class="header" href="#l_proofidlibrary">L_ProofIdLibrary</a></h1>
<h2 id="functions-12"><a class="header" href="#functions-12">Functions</a></h2>
<h3 id="toid-1"><a class="header" href="#toid-1">toId</a></h3>
<pre><code class="language-solidity">function toId(S_ProofKey memory proofKey) internal pure returns (bytes32);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="s_goodkey"><a class="header" href="#s_goodkey">S_GoodKey</a></h1>
<pre><code class="language-solidity">struct S_GoodKey {
    address erc20address;
    address owner;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="s_proofkey"><a class="header" href="#s_proofkey">S_ProofKey</a></h1>
<pre><code class="language-solidity">struct S_ProofKey {
    address owner;
    uint256 currentgood;
    uint256 valuegood;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="s_ralate"><a class="header" href="#s_ralate">S_Ralate</a></h1>
<pre><code class="language-solidity">struct S_Ralate {
    address gater;
    address refer;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="goodmanage"><a class="header" href="#goodmanage">GoodManage</a></h1>
<p><strong>Inherits:</strong>
<a href="Contracts/GoodManage.sol//Contracts/interfaces/I_Good.sol/interface.I_Good.html">I_Good</a>, <a href="Contracts/GoodManage.sol//Contracts/RefererManage.sol/abstract.RefererManage.html">RefererManage</a></p>
<h2 id="state-variables-1"><a class="header" href="#state-variables-1">State Variables</a></h2>
<h3 id="marketconfig-1"><a class="header" href="#marketconfig-1">marketconfig</a></h3>
<p>Returns the config of the market~返回市场的配置</p>
<p><em>Can be changed by the marketmanager~可以被管理员调整</em></p>
<pre><code class="language-solidity">uint256 public override marketconfig;
</code></pre>
<h3 id="goodnum-1"><a class="header" href="#goodnum-1">goodNum</a></h3>
<p>Returns the good's total number of the market 返回市场商品总数</p>
<pre><code class="language-solidity">uint256 public override goodNum;
</code></pre>
<h3 id="marketcreator-1"><a class="header" href="#marketcreator-1">marketcreator</a></h3>
<p>Returns the manger of market 返回市场管理者 返回市场商品总数</p>
<pre><code class="language-solidity">address public override marketcreator;
</code></pre>
<h3 id="goods"><a class="header" href="#goods">goods</a></h3>
<pre><code class="language-solidity">mapping(uint256 =&gt; L_Good.S_GoodState) internal goods;
</code></pre>
<h3 id="ownergoods"><a class="header" href="#ownergoods">ownergoods</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; L_ArrayStorage.S_ArrayStorage) internal ownergoods;
</code></pre>
<h3 id="goodseq"><a class="header" href="#goodseq">goodseq</a></h3>
<pre><code class="language-solidity">mapping(bytes32 =&gt; uint256) internal goodseq;
</code></pre>
<h3 id="locked"><a class="header" href="#locked">locked</a></h3>
<pre><code class="language-solidity">uint256 internal locked;
</code></pre>
<h3 id="banlist"><a class="header" href="#banlist">banlist</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; uint256) private banlist;
</code></pre>
<h2 id="functions-13"><a class="header" href="#functions-13">Functions</a></h2>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<pre><code class="language-solidity">constructor(address _marketcreator, uint256 _marketconfig);
</code></pre>
<h3 id="onlymarketcreator"><a class="header" href="#onlymarketcreator">onlyMarketCreator</a></h3>
<pre><code class="language-solidity">modifier onlyMarketCreator();
</code></pre>
<h3 id="noreentrant"><a class="header" href="#noreentrant">noReentrant</a></h3>
<pre><code class="language-solidity">modifier noReentrant();
</code></pre>
<h3 id="noblacklist"><a class="header" href="#noblacklist">noblacklist</a></h3>
<pre><code class="language-solidity">modifier noblacklist();
</code></pre>
<h3 id="addbanlist-1"><a class="header" href="#addbanlist-1">addbanlist</a></h3>
<p>add ban list  增加禁止名单</p>
<pre><code class="language-solidity">function addbanlist(address _user) external override onlyMarketCreator returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>address 地址</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>is_success_ 是否成功</td></tr>
</tbody></table>
</div>
<h3 id="removebanlist-1"><a class="header" href="#removebanlist-1">removebanlist</a></h3>
<p>rm ban list  移除禁止名单</p>
<pre><code class="language-solidity">function removebanlist(address _user) external override onlyMarketCreator returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>address 地址</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>is_success_ 是否成功</td></tr>
</tbody></table>
</div>
<h3 id="setmarketconfig-1"><a class="header" href="#setmarketconfig-1">setMarketConfig</a></h3>
<p>config market config 设置市场中市场配置</p>
<pre><code class="language-solidity">function setMarketConfig(uint256 _marketconfig) external override onlyMarketCreator returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_marketconfig</code></td><td><code>uint256</code></td><td>the market config ~市场配置</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>是否成功</td></tr>
</tbody></table>
</div>
<h3 id="getgoodidbyaddress-1"><a class="header" href="#getgoodidbyaddress-1">getGoodIdByAddress</a></h3>
<p>get seller's good~获取卖家的商品列表</p>
<pre><code class="language-solidity">function getGoodIdByAddress(address _owner, uint256 _key) external view override returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_owner</code></td><td><code>address</code></td><td>seller address~卖家地址</td></tr>
<tr><td><code>_key</code></td><td><code>uint256</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>goods No~商品编号</td></tr>
</tbody></table>
</div>
<h3 id="getgoodstate-1"><a class="header" href="#getgoodstate-1">getGoodState</a></h3>
<p>get good's state 获取商品状态</p>
<pre><code class="language-solidity">function getGoodState(uint256 _goodid) external view override returns (L_Good.S_GoodTmpState memory good_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>good's id  商品的商品编号</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>good_</code></td><td><code>L_Good.S_GoodTmpState</code></td><td>goodinfo 商品的状态信息</td></tr>
</tbody></table>
</div>
<h3 id="getgoodsfee-1"><a class="header" href="#getgoodsfee-1">getGoodsFee</a></h3>
<p>获取商品的用户协议手续费</p>
<pre><code class="language-solidity">function getGoodsFee(uint256 _goodid, address user) external view override returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>商品编号</td></tr>
<tr><td><code>user</code></td><td><code>address</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>fee_ 是否成功</td></tr>
</tbody></table>
</div>
<h3 id="updategoodconfig-2"><a class="header" href="#updategoodconfig-2">updateGoodConfig</a></h3>
<pre><code class="language-solidity">function updateGoodConfig(uint256 _goodid, uint256 _goodConfig) external override returns (bool);
</code></pre>
<h3 id="updatetovaluegood-2"><a class="header" href="#updatetovaluegood-2">updatetoValueGood</a></h3>
<p>update normal good to value good 更新普通商品为价值商品</p>
<pre><code class="language-solidity">function updatetoValueGood(uint256 _goodid) external override onlyMarketCreator returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>good's id 商品的商品ID</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>the result  更新结果</td></tr>
</tbody></table>
</div>
<h3 id="updatetonormalgood-2"><a class="header" href="#updatetonormalgood-2">updatetoNormalGood</a></h3>
<p>update normal good to value good 更新价值商品为普通商品</p>
<pre><code class="language-solidity">function updatetoNormalGood(uint256 _goodid) external override onlyMarketCreator returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>good's id 商品的商品ID</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>the result  更新结果</td></tr>
</tbody></table>
</div>
<h3 id="paygood-1"><a class="header" href="#paygood-1">payGood</a></h3>
<p>pay good to  转给</p>
<pre><code class="language-solidity">function payGood(uint256 _goodid, uint256 _payquanity, address _recipent) external payable returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>商品的商品ID</td></tr>
<tr><td><code>_payquanity</code></td><td><code>uint256</code></td><td>数量</td></tr>
<tr><td><code>_recipent</code></td><td><code>address</code></td><td>接收者</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>the result</td></tr>
</tbody></table>
</div>
<h3 id="changegoodowner-1"><a class="header" href="#changegoodowner-1">changeGoodOwner</a></h3>
<p>set good's Owner 改变商品的拥有者</p>
<pre><code class="language-solidity">function changeGoodOwner(uint256 _goodid, address _to) external override returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>good's id 商品的商品ID</td></tr>
<tr><td><code>_to</code></td><td><code>address</code></td><td>recipent 接收者</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>the result</td></tr>
</tbody></table>
</div>
<h3 id="collectprotocolfee-1"><a class="header" href="#collectprotocolfee-1">collectProtocolFee</a></h3>
<p>collect protocalFee 收益协议手续费</p>
<pre><code class="language-solidity">function collectProtocolFee(uint256 _goodid) external override noblacklist returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>good's id 商品的商品ID</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>the result 手续费数量</td></tr>
</tbody></table>
</div>
<h3 id="check_banlist-1"><a class="header" href="#check_banlist-1">check_banlist</a></h3>
<p>Returns the address's status 查询地址是否被禁止提手续费</p>
<pre><code class="language-solidity">function check_banlist(address _user) external view override returns (bool _isban);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>用户地址</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_isban</code></td><td><code>bool</code></td><td>the address status~地址是否被禁</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="marketmanager"><a class="header" href="#marketmanager">MarketManager</a></h1>
<p><strong>Inherits:</strong>
<a href="Contracts/MarketManager.sol//Contracts/Multicall.sol/abstract.Multicall.html">Multicall</a>, <a href="Contracts/MarketManager.sol//Contracts/GoodManage.sol/abstract.GoodManage.html">GoodManage</a>, <a href="Contracts/MarketManager.sol//Contracts/ProofManage.sol/abstract.ProofManage.html">ProofManage</a>, <a href="Contracts/MarketManager.sol//Contracts/interfaces/I_MarketManage.sol/interface.I_MarketManage.html">I_MarketManage</a></p>
<h2 id="functions-14"><a class="header" href="#functions-14">Functions</a></h2>
<h3 id="constructor-1"><a class="header" href="#constructor-1">constructor</a></h3>
<pre><code class="language-solidity">constructor(address _marketcreator, uint256 _marketconfig) GoodManage(_marketcreator, _marketconfig);
</code></pre>
<h3 id="initmetagood-1"><a class="header" href="#initmetagood-1">initMetaGood</a></h3>
<p>initial market's first good~初始化市场中第一个商品</p>
<pre><code class="language-solidity">function initMetaGood(address _erc20address, T_BalanceUINT256 _initial, uint256 _goodConfig)
    external
    payable
    override
    onlyMarketCreator
    returns (uint256, uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_erc20address</code></td><td><code>address</code></td><td>good's contract address~商品合约地址</td></tr>
<tr><td><code>_initial</code></td><td><code>T_BalanceUINT256</code></td><td>initial good.amount0:value,amount1:quantity~初始化的商品的参数,前128位为价值,后128位为数量.</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>metagood_no_  good_no~商品编号</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>proof_no_  proof_no~投资证明编号</td></tr>
</tbody></table>
</div>
<h3 id="initgood-1"><a class="header" href="#initgood-1">initGood</a></h3>
<p>initial the normal good~初始化市场中的普通商品</p>
<pre><code class="language-solidity">function initGood(
    uint256 _valuegood,
    T_BalanceUINT256 _initial,
    address _erc20address,
    uint256 _goodConfig,
    address _gater
) external payable override noReentrant returns (uint256, uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_valuegood</code></td><td><code>uint256</code></td><td>valuegood_no:measure the normal good value~价值商品编号:衡量普通商品价值</td></tr>
<tr><td><code>_initial</code></td><td><code>T_BalanceUINT256</code></td><td>initial good.amount0:normalgood quantity,amount1:valuegoodquantity~初始化的商品的参数,前128位为普通商品数量,后128位为价值商品数量.</td></tr>
<tr><td><code>_erc20address</code></td><td><code>address</code></td><td>good's contract address~商品合约地址</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>good config (detail config according to the whitepaper)~商品配置(详细配置参见技术白皮书)</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>gater address~门户地址</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>goodNo_ the_normal_good_No ~普通物品的编号</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>proofNo_ the_proof_of_initial_good~初始化普通物品的投资证明</td></tr>
</tbody></table>
</div>
<h3 id="buygood-1"><a class="header" href="#buygood-1">buyGood</a></h3>
<p>sell _swapQuantity units of good1 to buy good2~用户出售_swapQuantity个_goodid1去购买 _goodid2</p>
<p><em>如果购买商品1而出售商品2,开发者需求折算成使用商品2购买商品1</em></p>
<pre><code class="language-solidity">function buyGood(
    uint256 _goodid1,
    uint256 _goodid2,
    uint128 _swapQuantity,
    uint256 _limitPrice,
    bool _istotal,
    address _gater
) external override noReentrant returns (uint128 goodid2Quantity_, uint128 goodid2FeeQuantity_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid1</code></td><td><code>uint256</code></td><td>good1's No~商品1的编号</td></tr>
<tr><td><code>_goodid2</code></td><td><code>uint256</code></td><td>good2's No~商品2的编号</td></tr>
<tr><td><code>_swapQuantity</code></td><td><code>uint128</code></td><td>good1's quantity~商品1的数量</td></tr>
<tr><td><code>_limitPrice</code></td><td><code>uint256</code></td><td></td></tr>
<tr><td><code>_istotal</code></td><td><code>bool</code></td><td>is need trade all~是否允许全部成交</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>gater address~门户地址</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodid2Quantity_</code></td><td><code>uint128</code></td><td>实际情况</td></tr>
<tr><td><code>goodid2FeeQuantity_</code></td><td><code>uint128</code></td><td>实际情况</td></tr>
</tbody></table>
</div>
<h3 id="buygoodforpay-1"><a class="header" href="#buygoodforpay-1">buyGoodForPay</a></h3>
<p>buy _swapQuantity units of good to sell good2 and send good1 to recipent~用户购买_swapQuantity个_goodid1去出售 _goodid2并且把商品转给RECIPENT</p>
<pre><code class="language-solidity">function buyGoodForPay(
    uint256 _goodid1,
    uint256 _goodid2,
    uint128 _swapQuantity,
    uint256 _limitPrice,
    address _recipent,
    address _gater
) external override noReentrant returns (uint128 goodid1Quantity_, uint128 goodid1FeeQuantity_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid1</code></td><td><code>uint256</code></td><td>good1's No~商品1的编号</td></tr>
<tr><td><code>_goodid2</code></td><td><code>uint256</code></td><td>good2's No~商品2的编号</td></tr>
<tr><td><code>_swapQuantity</code></td><td><code>uint128</code></td><td>buy good2's quantity~购买商品2的数量</td></tr>
<tr><td><code>_limitPrice</code></td><td><code>uint256</code></td><td></td></tr>
<tr><td><code>_recipent</code></td><td><code>address</code></td><td>recipent~收款人</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>gater address~门户地址</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodid1Quantity_</code></td><td><code>uint128</code></td><td>good1 actual quantity~商品1实际数量</td></tr>
<tr><td><code>goodid1FeeQuantity_</code></td><td><code>uint128</code></td><td>good1 actual fee~商品1实际手续费</td></tr>
</tbody></table>
</div>
<h3 id="investgood-2"><a class="header" href="#investgood-2">investGood</a></h3>
<p>invest normal good~投资普通商品</p>
<pre><code class="language-solidity">function investGood(uint256 _togood, uint256 _valuegood, uint128 _quantity, address _gater)
    external
    override
    noReentrant
    returns (
        L_Good.S_GoodInvestReturn memory normalInvest_,
        L_Good.S_GoodInvestReturn memory valueInvest_,
        uint256 proofno_
    );
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_togood</code></td><td><code>uint256</code></td><td>normal good No~普通商品的编号</td></tr>
<tr><td><code>_valuegood</code></td><td><code>uint256</code></td><td>value good No~价值商品的编号</td></tr>
<tr><td><code>_quantity</code></td><td><code>uint128</code></td><td>invest normal good quantity~投资普通商品的数量</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>gater address~门户</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>normalInvest_</code></td><td><code>L_Good.S_GoodInvestReturn</code></td><td>normalInvest_ normalInvest_.actualFeeQuantity //actutal fee quantity 实际手续费 normalInvest_.contructFeeQuantity //contrunct fee quantity 构建手续费 normalInvest_.actualinvestValue //value of invest 实际投资价值 normalInvest_.actualinvestQuantity //the quantity of invest 实际投资数量</td></tr>
<tr><td><code>valueInvest_</code></td><td><code>L_Good.S_GoodInvestReturn</code></td><td>valueInvest_ valueInvest_.actualFeeQuantity //actutal fee quantity 实际手续费 valueInvest_.contructFeeQuantity //contrunct fee quantity 构建手续费 valueInvest_.actualinvestValue //value of invest 实际投资价值 valueInvest_.actualinvestQuantity //the quantity of invest 实际投资数量</td></tr>
<tr><td><code>proofno_</code></td><td><code>uint256</code></td><td>normalProofno_  证明编号</td></tr>
</tbody></table>
</div>
<h3 id="disinvestgood-2"><a class="header" href="#disinvestgood-2">disinvestGood</a></h3>
<p>disinvest normal good~撤资普通商品</p>
<pre><code class="language-solidity">function disinvestGood(uint256 _togood, uint256 _valuegood, uint128 _goodQuantity, address _gater)
    external
    override
    returns (
        L_Good.S_GoodDisinvestReturn memory disinvestNormalResult1_,
        L_Good.S_GoodDisinvestReturn memory disinvestValueResult2_,
        uint256 proofno_
    );
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_togood</code></td><td><code>uint256</code></td><td>normal good No~普通商品编号</td></tr>
<tr><td><code>_valuegood</code></td><td><code>uint256</code></td><td>value Good No~价值商品编号</td></tr>
<tr><td><code>_goodQuantity</code></td><td><code>uint128</code></td><td>disinvest quantity~取消普通商品投资数量</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>gater address~门户</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>disinvestNormalResult1_</code></td><td><code>L_Good.S_GoodDisinvestReturn</code></td><td>disinvestResult1_ 普通商品结果 disinvestResult1_.profit; // profit of stake 投资收入 disinvestResult1_.actual_fee; // actual fee 实际手续费 disinvestResult1_.actualDisinvestValue; // disinvest value  撤资价值 disinvestResult1_.actualDisinvestQuantity; //disinvest quantity 撤资数量</td></tr>
<tr><td><code>disinvestValueResult2_</code></td><td><code>L_Good.S_GoodDisinvestReturn</code></td><td>disinvestResult2_ 价值商品结果 disinvestResult2_.profit; // profit of stake 投资收入 disinvestResult2_.actual_fee; // actual fee 实际手续费 disinvestResult2_.actualDisinvestValue; // disinvest value  撤资价值 disinvestResult2_.actualDisinvestQuantity; //disinvest quantity 撤资数量</td></tr>
<tr><td><code>proofno_</code></td><td><code>uint256</code></td><td>证明编号</td></tr>
</tbody></table>
</div>
<h3 id="disinvestproof-1"><a class="header" href="#disinvestproof-1">disinvestProof</a></h3>
<p>disinvest normal good~撤资商品</p>
<pre><code class="language-solidity">function disinvestProof(uint256 _proofid, uint128 _goodQuantity, address _gater)
    public
    override
    noReentrant
    returns (
        L_Good.S_GoodDisinvestReturn memory disinvestNormalResult1_,
        L_Good.S_GoodDisinvestReturn memory disinvestValueResult2_
    );
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofid</code></td><td><code>uint256</code></td><td>the invest proof No of normal good ~普通投资证明的编号编号</td></tr>
<tr><td><code>_goodQuantity</code></td><td><code>uint128</code></td><td>disinvest quantity~取消普通商品投资数量</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>gater address~门户</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>disinvestNormalResult1_</code></td><td><code>L_Good.S_GoodDisinvestReturn</code></td><td>disinvestResult1_ 普通商品结果 disinvestResult1_.profit; // profit of stake 投资收入 disinvestResult1_.actual_fee; // actual fee 实际手续费 disinvestResult1_.actualDisinvestValue; // disinvest value  撤资价值 disinvestResult1_.actualDisinvestQuantity; //disinvest quantity 撤资数量</td></tr>
<tr><td><code>disinvestValueResult2_</code></td><td><code>L_Good.S_GoodDisinvestReturn</code></td><td>disinvestResult2_ 价值商品结果 disinvestResult2_.profit; // profit of stake 投资收入 disinvestResult2_.actual_fee; // actual fee 实际手续费 disinvestResult2_.actualDisinvestValue; // disinvest value  撤资价值 disinvestResult2_.actualDisinvestQuantity; //disinvest quantity 撤资数量</td></tr>
</tbody></table>
</div>
<h3 id="collectprooffee-2"><a class="header" href="#collectprooffee-2">collectProofFee</a></h3>
<p>collect the profit of normal proof~提取普通投资证明的收益</p>
<pre><code class="language-solidity">function collectProofFee(uint256 _proofid) external override returns (T_BalanceUINT256 profit_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofid</code></td><td><code>uint256</code></td><td>the proof No of invest normal good~普通投资证明编号</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>profit_</code></td><td><code>T_BalanceUINT256</code></td><td>amount0 普通商品的投资收益 amount1价值商品的投资收益</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="multicall"><a class="header" href="#multicall">Multicall</a></h1>
<p>Enables calling multiple methods in a single call to the contract</p>
<h2 id="functions-15"><a class="header" href="#functions-15">Functions</a></h2>
<h3 id="multicall-1"><a class="header" href="#multicall-1">multicall</a></h3>
<pre><code class="language-solidity">function multicall(bytes[] calldata data) public payable returns (bytes[] memory results);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="proofmanage"><a class="header" href="#proofmanage">ProofManage</a></h1>
<p><strong>Inherits:</strong>
<a href="Contracts/ProofManage.sol//Contracts/interfaces/I_Proof.sol/interface.I_Proof.html">I_Proof</a>, Context, ERC165</p>
<h2 id="state-variables-2"><a class="header" href="#state-variables-2">State Variables</a></h2>
<h3 id="_name"><a class="header" href="#_name">_name</a></h3>
<pre><code class="language-solidity">string private constant _name = "TTSWAP NFT";
</code></pre>
<h3 id="_symbol"><a class="header" href="#_symbol">_symbol</a></h3>
<pre><code class="language-solidity">string private constant _symbol = "TTN";
</code></pre>
<h3 id="totalsupply-1"><a class="header" href="#totalsupply-1">totalSupply</a></h3>
<pre><code class="language-solidity">uint256 public override totalSupply;
</code></pre>
<h3 id="proofs"><a class="header" href="#proofs">proofs</a></h3>
<pre><code class="language-solidity">mapping(uint256 =&gt; L_Proof.S_ProofState) internal proofs;
</code></pre>
<h3 id="ownerproofs"><a class="header" href="#ownerproofs">ownerproofs</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; L_ArrayStorage.S_ArrayStorage) internal ownerproofs;
</code></pre>
<h3 id="proofseq"><a class="header" href="#proofseq">proofseq</a></h3>
<pre><code class="language-solidity">mapping(bytes32 =&gt; uint256) public proofseq;
</code></pre>
<h3 id="_operatorapprovals"><a class="header" href="#_operatorapprovals">_operatorApprovals</a></h3>
<pre><code class="language-solidity">mapping(address owner =&gt; mapping(address operator =&gt; bool)) private _operatorApprovals;
</code></pre>
<h2 id="functions-16"><a class="header" href="#functions-16">Functions</a></h2>
<h3 id="onlyowner"><a class="header" href="#onlyowner">onlyOwner</a></h3>
<pre><code class="language-solidity">modifier onlyOwner(uint256 proofid);
</code></pre>
<h3 id="onlyapproval"><a class="header" href="#onlyapproval">onlyApproval</a></h3>
<pre><code class="language-solidity">modifier onlyApproval(uint256 proofid);
</code></pre>
<h3 id="constructor-2"><a class="header" href="#constructor-2">constructor</a></h3>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="supportsinterface"><a class="header" href="#supportsinterface">supportsInterface</a></h3>
<pre><code class="language-solidity">function supportsInterface(bytes4 interfaceId) public view override(ERC165, IERC165) returns (bool);
</code></pre>
<h3 id="tokenuri"><a class="header" href="#tokenuri">tokenURI</a></h3>
<p><em>See <a href="Contracts/ProofManage.sol//lib/forge-std/test/mocks/MockERC721.t.sol/contract.Token_ERC721.html#tokenuri">IERC721Metadata-tokenURI</a>.</em></p>
<pre><code class="language-solidity">function tokenURI(uint256 proofId) external view onlyOwner(proofId) returns (string memory);
</code></pre>
<h3 id="balanceof"><a class="header" href="#balanceof">balanceOf</a></h3>
<p><em>Base URI for computing <a href="Contracts/ProofManage.sol//Contracts/ProofManage.sol/abstract.ProofManage.html#tokenuri">tokenURI</a>. If set, the resulting URI for each
token will be the concatenation of the <code>baseURI</code> and the <code>proofId</code>. Empty
by default, can be overridden in child contracts.</em></p>
<pre><code class="language-solidity">function balanceOf(address owner) external view returns (uint256);
</code></pre>
<h3 id="ownerof"><a class="header" href="#ownerof">ownerOf</a></h3>
<pre><code class="language-solidity">function ownerOf(uint256 proofId) external view returns (address);
</code></pre>
<h3 id="tokenbyindex"><a class="header" href="#tokenbyindex">tokenByIndex</a></h3>
<pre><code class="language-solidity">function tokenByIndex(uint256 _index) external pure returns (uint256);
</code></pre>
<h3 id="tokenofownerbyindex"><a class="header" href="#tokenofownerbyindex">tokenOfOwnerByIndex</a></h3>
<pre><code class="language-solidity">function tokenOfOwnerByIndex(address _owner, uint256 _index) external view returns (uint256);
</code></pre>
<h3 id="getproofid-1"><a class="header" href="#getproofid-1">getProofId</a></h3>
<p>get the invest proof'id ~ 获取投资证明ID</p>
<pre><code class="language-solidity">function getProofId(S_ProofKey calldata _investproofkey) external view override returns (uint256 proof_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_investproofkey</code></td><td><code>S_ProofKey</code></td><td>生成投资证明的参数据</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proof_</code></td><td><code>uint256</code></td><td>投资证明的ID</td></tr>
</tbody></table>
</div>
<h3 id="name"><a class="header" href="#name">name</a></h3>
<pre><code class="language-solidity">function name() external pure returns (string memory);
</code></pre>
<h3 id="symbol"><a class="header" href="#symbol">symbol</a></h3>
<pre><code class="language-solidity">function symbol() external pure returns (string memory);
</code></pre>
<h3 id="approve"><a class="header" href="#approve">approve</a></h3>
<pre><code class="language-solidity">function approve(address to, uint256 proofId) external onlyApproval(proofId);
</code></pre>
<h3 id="getapproved"><a class="header" href="#getapproved">getApproved</a></h3>
<pre><code class="language-solidity">function getApproved(uint256 proofId) external view returns (address);
</code></pre>
<h3 id="setapprovalforall"><a class="header" href="#setapprovalforall">setApprovalForAll</a></h3>
<pre><code class="language-solidity">function setApprovalForAll(address operator, bool approved) external;
</code></pre>
<h3 id="isapprovedforall"><a class="header" href="#isapprovedforall">isApprovedForAll</a></h3>
<pre><code class="language-solidity">function isApprovedForAll(address owner, address operator) external view returns (bool);
</code></pre>
<h3 id="transferfrom-1"><a class="header" href="#transferfrom-1">transferFrom</a></h3>
<pre><code class="language-solidity">function transferFrom(address from, address to, uint256 proofid) public onlyApproval(proofid);
</code></pre>
<h3 id="safetransferfrom"><a class="header" href="#safetransferfrom">safeTransferFrom</a></h3>
<pre><code class="language-solidity">function safeTransferFrom(address from, address to, uint256 proofid) external;
</code></pre>
<h3 id="safetransferfrom-1"><a class="header" href="#safetransferfrom-1">safeTransferFrom</a></h3>
<pre><code class="language-solidity">function safeTransferFrom(address from, address to, uint256 tokenId, bytes memory data) public;
</code></pre>
<h3 id="getproofstate-1"><a class="header" href="#getproofstate-1">getProofState</a></h3>
<p>get the invest proof'id 获取投资证明ID详情</p>
<pre><code class="language-solidity">function getProofState(uint256 _proof) external view override returns (L_Proof.S_ProofState memory proof_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proof</code></td><td><code>uint256</code></td><td>证明编号</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proof_</code></td><td><code>L_Proof.S_ProofState</code></td><td>证明信息</td></tr>
</tbody></table>
</div>
<h3 id="changeproofowner-1"><a class="header" href="#changeproofowner-1">changeProofOwner</a></h3>
<p>改变投资证明的拥有者</p>
<pre><code class="language-solidity">function changeProofOwner(uint256 _proofid, address _to) external override returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofid</code></td><td><code>uint256</code></td><td>生成投资证明的参数据</td></tr>
<tr><td><code>_to</code></td><td><code>address</code></td><td>生成投资证明的参数据</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>proof_ 投资证明的ID</td></tr>
</tbody></table>
</div>
<h3 id="_checkonerc721received"><a class="header" href="#_checkonerc721received">_checkOnERC721Received</a></h3>
<pre><code class="language-solidity">function _checkOnERC721Received(address from, address to, uint256 tokenId, bytes memory data) private;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="referermanage"><a class="header" href="#referermanage">RefererManage</a></h1>
<p><strong>Inherits:</strong>
<a href="Contracts/RefererManage.sol//Contracts/interfaces/I_Referer.sol/interface.I_Referer.html">I_Referer</a></p>
<h2 id="state-variables-3"><a class="header" href="#state-variables-3">State Variables</a></h2>
<h3 id="customernum"><a class="header" href="#customernum">customernum</a></h3>
<pre><code class="language-solidity">uint256 public customernum;
</code></pre>
<h3 id="customerno"><a class="header" href="#customerno">customerno</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; uint256) public customerno;
</code></pre>
<h3 id="relations"><a class="header" href="#relations">relations</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; address) public relations;
</code></pre>
<h2 id="functions-17"><a class="header" href="#functions-17">Functions</a></h2>
<h3 id="constructor-3"><a class="header" href="#constructor-3">constructor</a></h3>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="addreferer-1"><a class="header" href="#addreferer-1">addreferer</a></h3>
<p>user add referer~用户添加推荐人</p>
<pre><code class="language-solidity">function addreferer(address _referer) external override returns (bool is_success_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_referer</code></td><td><code>address</code></td><td>address or referer~推荐人地址</td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
