<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Home</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html" class="active">Home</a></li><li class="chapter-item affix "><li class="part-title">Contracts</li><li class="chapter-item "><a href="Contracts/interfaces/index.html">❱ interfaces</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="Contracts/interfaces/I_Good.sol/interface.I_Good.html">I_Good</a></li><li class="chapter-item "><a href="Contracts/interfaces/I_MarketManage.sol/interface.I_MarketManage.html">I_MarketManage</a></li><li class="chapter-item "><a href="Contracts/interfaces/I_Proof.sol/interface.I_Proof.html">I_Proof</a></li><li class="chapter-item "><a href="Contracts/interfaces/I_Referer.sol/interface.I_Referer.html">I_Referer</a></li></ol></li><li class="chapter-item "><a href="Contracts/libraries/index.html">❱ libraries</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="Contracts/libraries/L_ArrayStorage.sol/library.L_ArrayStorage.html">L_ArrayStorage</a></li><li class="chapter-item "><a href="Contracts/libraries/L_BalanceUINT256.sol/type.T_BalanceUINT256.html">T_BalanceUINT256</a></li><li class="chapter-item "><a href="Contracts/libraries/L_BalanceUINT256.sol/library.L_BalanceUINT256Library.html">L_BalanceUINT256Library</a></li><li class="chapter-item "><a href="Contracts/libraries/L_BalanceUINT256.sol/function.toBalanceUINT256.html">toBalanceUINT256</a></li><li class="chapter-item "><a href="Contracts/libraries/L_BalanceUINT256.sol/function.lowerprice.html">lowerprice</a></li><li class="chapter-item "><a href="Contracts/libraries/L_BalanceUINT256.sol/function.subadd.html">subadd</a></li><li class="chapter-item "><a href="Contracts/libraries/L_BalanceUINT256.sol/function.sub.html">sub</a></li><li class="chapter-item "><a href="Contracts/libraries/L_BalanceUINT256.sol/function.addsub.html">addsub</a></li><li class="chapter-item "><a href="Contracts/libraries/L_BalanceUINT256.sol/function.add.html">add</a></li><li class="chapter-item "><a href="Contracts/libraries/L_Currency.sol/library.L_CurrencyLibrary.html">L_CurrencyLibrary</a></li><li class="chapter-item "><a href="Contracts/libraries/L_Good.sol/library.L_Good.html">L_Good</a></li><li class="chapter-item "><a href="Contracts/libraries/L_Good.sol/library.L_GoodIdLibrary.html">L_GoodIdLibrary</a></li><li class="chapter-item "><a href="Contracts/libraries/L_GoodConfig.sol/library.L_GoodConfigLibrary.html">L_GoodConfigLibrary</a></li><li class="chapter-item "><a href="Contracts/libraries/L_MarketConfig.sol/library.L_MarketConfigLibrary.html">L_MarketConfigLibrary</a></li><li class="chapter-item "><a href="Contracts/libraries/L_Proof.sol/library.L_Proof.html">L_Proof</a></li><li class="chapter-item "><a href="Contracts/libraries/L_Proof.sol/library.L_ProofIdLibrary.html">L_ProofIdLibrary</a></li><li class="chapter-item "><a href="Contracts/libraries/L_Struct.sol/struct.S_GoodKey.html">S_GoodKey</a></li><li class="chapter-item "><a href="Contracts/libraries/L_Struct.sol/struct.S_ProofKey.html">S_ProofKey</a></li><li class="chapter-item "><a href="Contracts/libraries/L_Struct.sol/struct.S_Ralate.html">S_Ralate</a></li></ol></li><li class="chapter-item "><a href="Contracts/GoodManage.sol/abstract.GoodManage.html">GoodManage</a></li><li class="chapter-item "><a href="Contracts/MarketManager.sol/contract.MarketManager.html">MarketManager</a></li><li class="chapter-item "><a href="Contracts/Multicall.sol/abstract.Multicall.html">Multicall</a></li><li class="chapter-item "><a href="Contracts/ProofManage.sol/abstract.ProofManage.html">ProofManage</a></li><li class="chapter-item "><a href="Contracts/RefererManage.sol/abstract.RefererManage.html">RefererManage</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ttswap"><a class="header" href="#ttswap">TTSWAP</a></h1>
<p>TTSWAP (token-token swap) protocol is a decentralized automated market-making protocol built on the Ethereum blockchain. Its underlying principle is based on the transfer of market value triggered by user behavior, and it constructs a platform using value conservation trading strategies.
The whitepaper explains the design logic of the ttswap project, covering principles and implementations of good trading, investment, and withdrawal of value goods, as well as ordinary good investment and withdrawal, and the generation and distribution of good transaction fees.</p>
<h2 id="features"><a class="header" href="#features">Features</a></h2>
<p>Value Conservation Trading Strategy
The value conservation trading strategy accurately reflects the true market value of currencies and facilitates fast good transactions.</p>
<ol>
<li>
<p>Direct Trading without Intermediaries
On this platform, any two types of items can be directly traded without the need for intermediate conversions.</p>
</li>
<li>
<p>No Slippage within Trading Threshold
Transactions below the good trading threshold incur no slippage.</p>
</li>
<li>
<p>No Impermanent Loss for Liquidity Providers or good Investors
Constant market value inherently prevents impermanent loss. When users withdraw their investment, they receive the original invested good plus profits generated from providing liquidity.</p>
</li>
<li>
<p>Low Gas Fees with Simple Computational Logic
The logic behind the constant value trading model is simple, resulting in low computational load and gas consumption.</p>
</li>
<li>
<p>Fee Distribution Based on Roles for Everyone
Fees are distributed based on roles, allowing anyone to become a good investor (liquidity provider), goods seller, gater, referrer, user, or platform role, sharing in the platform's growth earnings.</p>
</li>
<li>
<p>Support Native ETH Exchange and Invest
anyone can you native ETH without wrap to swap, invest easily.</p>
</li>
<li>
<p>Community-Driven Developement and Innovation
ttswap emphasizes a community-driven approach to development and innovation. Since its code release, there has been active community engagement, with many issues, pull requests, and unique feature ideas contributed by users. The protocol is designed to encourage innovation, allowing the global community to shape the future of AMMs.</p>
</li>
</ol>
<h2 id="contributing"><a class="header" href="#contributing">Contributing</a></h2>
<p>If you’re interested in contributing please see our <a href="./CONTRIBUTING.html">contribution guidelines</a>!</p>
<h2 id="whitepaper"><a class="header" href="#whitepaper">Whitepaper</a></h2>
<p>A more detailed description of ttswap Core can be found in the draft of the <a href="./docs/whitepaper_en.pdf">TTSWAP Core Whitepaper</a>.</p>
<h2 id="architecture"><a class="header" href="#architecture">Architecture</a></h2>
<p><code>ttswap-core</code> uses a singleton-style architecture, where all goods state is managed in the <code>MarketManager.sol</code> contract.</p>
<p>the contract devide four part:</p>
<p>Part 1: the action relate to good'initial ,good investing (stake or add liquidity),good disinvestint (unstake or remove liquidity),good swaping , or disinvesting proof ( burn stake proof or liquidity position )  are defined in marketmanager.sol.</p>
<p>Part 2: the action relate good config , collect fee of good , good's attribute defined in goodmanage.sol.</p>
<p>Part 3: because proof is ERC721 standard, and it's define in proofmanage.sol</p>
<p>Part 4: about user's refer is defined in referermanager.sol</p>
<h2 id="repository-structure--license"><a class="header" href="#repository-structure--license">Repository Structure &amp;&amp; License</a></h2>
<p>All contracts are held within the <code>ttswap-core/Contracts</code> folder.</p>
<p>Note  but all foundry tests are in the <code>ttswap-core/test</code> folder.</p>
<pre><code class="language-markdown">Contract
├── GoodManage.sol(BUSL-1.1)  
├── MarketManager.sol(BUSL-1.1)  
├── ProofManage.sol(BUSL-1.1)  
├── RefererManage.sol(BUSL-1.1) 
├── Multicall.sol( GPL-2.0-or-later)
├── interfaces  
│   ├── I_Good.sol(MIT)  
│   ├── I_MarketManage.sol(MIT)  
│   └── I_Proof.sol(MIT)   
└── libraries      
   ├── L_Good.sol(BUSL-1.1)    
   ├── L_GoodConfig.sol(MIT)     
   ├── L_MarketConfig.sol(MIT)    
   ├── L_Proof.sol(BUSL-1.1)   
   ├── T_BalanceUINT256.sol (MIT)     
   ├── T_Currency.sol (MIT)       
   ├── L_Struct.sol (MIT)     
   └── L_ArrayStorage.sol(MIT)    
docs
├── ebook
├── whitepaper-cn
│   └──whitepaper-cn.pdf(BUSL-1.1)
└── whitepaper-en
    └──whitepaper-en.pdf(BUSL-1.1)
tests

</code></pre>
<p>The primary license for ttswap-core is the Business Source License 1.1 (<code>BUSL-1.1</code>), see <a href="https://github.com/tt-swap/ttswap-core/blob/main/LICENSE">LICENSE</a>.</p>
<h2 id="everyone-can-be-gater"><a class="header" href="#everyone-can-be-gater">Everyone Can be Gater</a></h2>
<p>To utilize the contracts and deploy to a local testnet, you can install the code in your repo with forge:</p>
<pre><code class="language-markdown">forge install https://github.com/tt-swap/ttswap-core
</code></pre>
<p>To integrate with the contracts, the interfaces are available to use:</p>
<pre><code class="language-solidity">
import {I_MarketManager} from 'ttswap-core/contracts/interfaces/I_MarketManager.sol';

contract MyPortal  {
    IPoolManager poolManager;
    address IamGater

    function excellentThing () {
        poolManager.buyGood(...,IamGater);
    }
}

</code></pre>
<h2 id="user-deploy-local-instruction"><a class="header" href="#user-deploy-local-instruction">User deploy local instruction</a></h2>
<p>step 1:instrall forge
step 2:forge install OpenZeppelin/openzeppelin-contracts@v5.0.2
step 3:forge install marktoda/forge-gas-snapshot</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->

                            <a rel="next prefetch" href="Contracts/interfaces/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

                    <a rel="next prefetch" href="Contracts/interfaces/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>


    </div>
    </body>
</html>
